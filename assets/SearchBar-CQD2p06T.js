var he=Object.defineProperty;var me=(o,e,t)=>e in o?he(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var q=(o,e,t)=>me(o,typeof e!="symbol"?e+"":e,t);import{a as oe,c as k,g as h,x as pe,f as O,h as M,i as j,j as we,k as L,p as ne,w as Q,L as ye,M as be,N as y,O as ge,P as _e,b as E,Q as xe,t as F,u as W,R as re,o as Te,m as ke,D as R,z as V,C as T,S as K,K as Oe,F as Se,e as Ee,E as Z,l as Ce,y as qe}from"./index-2zQ-b5OQ.js";const We={class:"bg-wheat-50"},$e={class:"bg-rosybrown-800 h-56 rounded-t-[48px] text-center"},Me={class:"flex flex-col pt-20"},ht=oe({__name:"Footer",setup(o){return(e,t)=>(O(),k("div",We,[h("div",$e,[h("div",Me,[t[1]||(t[1]=h("span",{class:"text-sans text-rosybrown-50 mb-2"},"© 2025 米时典 SeeDict ",-1)),pe("",!0)])])]))}}),se=(o,e)=>{const t=o.__vccOpts||o;for(const[n,r]of e)t[n]=r;return t},Ie={},ze={class:"flex h-full flex-row justify-between rounded-lg bg-white"},De={class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"},He={class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"},Ne={class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"},Pe={class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"};function je(o,e){const t=we("RouterLink");return O(),k("div",ze,[h("div",De,[M(t,{to:{name:"home"}},{default:j(()=>e[0]||(e[0]=[L("主页")])),_:1})]),h("div",He,[M(t,{to:{name:"tutorial"}},{default:j(()=>e[1]||(e[1]=[L("入门")])),_:1})]),e[4]||(e[4]=h("div",{class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"},[h("a",{href:"https://jcnf40n3hvft.feishu.cn/docx/FSqidtsgjo25x0x6R1KcChopnTc",target:"_blank"},"帮助")],-1)),h("div",Ne,[M(t,{to:{name:"tool"}},{default:j(()=>e[2]||(e[2]=[L("工具")])),_:1})]),h("div",Pe,[M(t,{to:{name:"about"}},{default:j(()=>e[3]||(e[3]=[L("关于")])),_:1})])])}const mt=se(Ie,[["render",je]]),Le={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Re(o,e){return O(),k("svg",Le,e[0]||(e[0]=[h("path",{fill:"currentColor",d:"M12 21q-3.15 0-5.575-1.912T3.275 14.2q-.1-.375.15-.687t.675-.363q.4-.05.725.15t.45.6q.6 2.25 2.475 3.675T12 19q2.925 0 4.963-2.037T19 12t-2.037-4.962T12 5q-1.725 0-3.225.8T6.25 8H8q.425 0 .713.288T9 9t-.288.713T8 10H4q-.425 0-.712-.288T3 9V5q0-.425.288-.712T4 4t.713.288T5 5v1.35q1.275-1.6 3.113-2.475T12 3q1.875 0 3.513.713t2.85 1.924t1.925 2.85T21 12t-.712 3.513t-1.925 2.85t-2.85 1.925T12 21m1-9.4l2.5 2.5q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-2.8-2.8q-.15-.15-.225-.337T11 11.975V8q0-.425.288-.712T12 7t.713.288T13 8z"},null,-1)]))}const Ae=ne({name:"material-symbols-history-rounded",render:Re}),Fe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Be(o,e){return O(),k("svg",Fe,e[0]||(e[0]=[h("path",{fill:"currentColor",d:"M9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l5.6 5.6q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-5.6-5.6q-.75.6-1.725.95T9.5 16m0-2q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14"},null,-1)]))}const Ve=ne({name:"material-symbols-search-rounded",render:Be});function le(o){return ye()?(be(o),!0):!1}const ie=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ke=Object.prototype.toString,Ue=o=>Ke.call(o)==="[object Object]",x=()=>{},J=Ye();function Ye(){var o,e;return ie&&((o=window==null?void 0:window.navigator)==null?void 0:o.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Ge(...o){if(o.length!==1)return ge(...o);const e=o[0];return typeof e=="function"?_e(xe(()=>({get:e,set:x}))):E(e)}function Je(o,e){function t(...n){return new Promise((r,c)=>{Promise.resolve(o(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(r).catch(c)})}return t}function Qe(o,e={}){let t,n,r=x;const c=l=>{clearTimeout(l),r(),r=x};let i;return l=>{const a=y(o),p=y(e.maxWait);return t&&c(t),a<=0||p!==void 0&&p<=0?(n&&(c(n),n=null),Promise.resolve(l())):new Promise((w,b)=>{r=e.rejectOnCancel?b:w,i=l,p&&!n&&(n=setTimeout(()=>{t&&c(t),n=null,w(i())},p)),t=setTimeout(()=>{n&&c(n),n=null,w(l())},a)})}}function U(o){return Array.isArray(o)?o:[o]}function Xe(o,e=200,t={}){return Je(Qe(e,t),o)}function Ze(o,e,t){return Q(o,e,{...t,immediate:!0})}const ue=ie?window:void 0;function D(o){var e;const t=y(o);return(e=t==null?void 0:t.$el)!=null?e:t}function $(...o){const e=[],t=()=>{e.forEach(s=>s()),e.length=0},n=(s,l,a,p)=>(s.addEventListener(l,a,p),()=>s.removeEventListener(l,a,p)),r=F(()=>{const s=U(y(o[0])).filter(l=>l!=null);return s.every(l=>typeof l!="string")?s:void 0}),c=Ze(()=>{var s,l;return[(l=(s=r.value)==null?void 0:s.map(a=>D(a)))!=null?l:[ue].filter(a=>a!=null),U(y(r.value?o[1]:o[0])),U(W(r.value?o[2]:o[1])),y(r.value?o[3]:o[2])]},([s,l,a,p])=>{if(t(),!(s!=null&&s.length)||!(l!=null&&l.length)||!(a!=null&&a.length))return;const w=Ue(p)?{...p}:p;e.push(...s.flatMap(b=>l.flatMap(g=>a.map(C=>n(b,g,C,w)))))},{flush:"post"}),i=()=>{c(),t()};return le(t),i}let ee=!1;function te(o,e,t={}){const{window:n=ue,ignore:r=[],capture:c=!0,detectIframe:i=!1,controls:s=!1}=t;if(!n)return s?{stop:x,cancel:x,trigger:x}:x;if(J&&!ee){ee=!0;const u={passive:!0};Array.from(n.document.body.children).forEach(d=>$(d,"click",x,u)),$(n.document.documentElement,"click",x,u)}let l=!0;const a=u=>y(r).some(d=>{if(typeof d=="string")return Array.from(n.document.querySelectorAll(d)).some(m=>m===u.target||u.composedPath().includes(m));{const m=D(d);return m&&(u.target===m||u.composedPath().includes(m))}});function p(u){const d=y(u);return d&&d.$.subTree.shapeFlag===16}function w(u,d){const m=y(u),I=m.$.subTree&&m.$.subTree.children;return I==null||!Array.isArray(I)?!1:I.some(P=>P.el===d.target||d.composedPath().includes(P.el))}const b=u=>{const d=D(o);if(u.target!=null&&!(!(d instanceof Element)&&p(o)&&w(o,u))&&!(!d||d===u.target||u.composedPath().includes(d))){if("detail"in u&&u.detail===0&&(l=!a(u)),!l){l=!0;return}e(u)}};let g=!1;const C=[$(n,"click",u=>{g||(g=!0,setTimeout(()=>{g=!1},0),b(u))},{passive:!0,capture:c}),$(n,"pointerdown",u=>{const d=D(o);l=!a(u)&&!!(d&&!u.composedPath().includes(d))},{passive:!0}),i&&$(n,"blur",u=>{setTimeout(()=>{var d;const m=D(o);((d=n.document.activeElement)==null?void 0:d.tagName)==="IFRAME"&&!(m!=null&&m.contains(n.document.activeElement))&&e(u)},0)},{passive:!0})].filter(Boolean),N=()=>C.forEach(u=>u());return s?{stop:N,cancel:()=>{l=!1},trigger:u=>{l=!0,b(u),l=!1}}:N}const et={mounted(o,e){const t=!e.modifiers.bubble;if(typeof e.value=="function")o.__onClickOutside_stop=te(o,e.value,{capture:t});else{const[n,r]=e.value;o.__onClickOutside_stop=te(o,n,Object.assign({capture:t},r))}},unmounted(o){o.__onClickOutside_stop()}};function Y(o){return typeof Window<"u"&&o instanceof Window?o.document.documentElement:typeof Document<"u"&&o instanceof Document?o.documentElement:o}function ae(o){const e=window.getComputedStyle(o);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&o.clientWidth<o.scrollWidth||e.overflowY==="auto"&&o.clientHeight<o.scrollHeight)return!0;{const t=o.parentNode;return!t||t.tagName==="BODY"?!1:ae(t)}}function tt(o){const e=o||window.event,t=e.target;return ae(t)?!1:e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)}const G=new WeakMap;function ot(o,e=!1){const t=re(e);let n=null,r="";Q(Ge(o),s=>{const l=Y(y(s));if(l){const a=l;if(G.get(a)||G.set(a,a.style.overflow),a.style.overflow!=="hidden"&&(r=a.style.overflow),a.style.overflow==="hidden")return t.value=!0;if(t.value)return a.style.overflow="hidden"}},{immediate:!0});const c=()=>{const s=Y(y(o));!s||t.value||(J&&(n=$(s,"touchmove",l=>{tt(l)},{passive:!1})),s.style.overflow="hidden",t.value=!0)},i=()=>{const s=Y(y(o));!s||!t.value||(J&&(n==null||n()),s.style.overflow=r,G.delete(s),t.value=!1)};return le(i),F({get(){return t.value},set(s){s?c():i()}})}function nt(){let o=!1;const e=re(!1);return(t,n)=>{if(e.value=n.value,o)return;o=!0;const r=ot(t,n.value);Q(e,c=>r.value=c)}}nt();class A{constructor(){q(this,"children");q(this,"isEndOfWord");q(this,"timestamp");this.children={},this.isEndOfWord=!1,this.timestamp=null}}class H{constructor(){q(this,"root");q(this,"size");this.root=new A,this.size=0}clear(){this.root=new A,this.size=0}insert(e){let t=this.root;for(const n of e)t.children[n]||(t.children[n]=new A),t=t.children[n];t.isEndOfWord||this.size++,t.isEndOfWord=!0,t.timestamp=Date.now()}delete(e){const t=(n,r)=>{if(r===e.length)return n.isEndOfWord?(n.isEndOfWord=!1,this.size--,Object.keys(n.children).length===0):!1;const c=e[r],i=n.children[c];return i&&t(i,r+1)?(delete n.children[c],Object.keys(n.children).length===0):!1};t(this.root,0)}findWords(e){let t=this.root;for(const n of e){if(!t.children[n])return[];t=t.children[n]}return this.collectWords(t,e)}collectWords(e,t){const n=[];e.isEndOfWord&&e.timestamp&&n.push({word:t,timestamp:e.timestamp});for(const r in e.children)n.push(...this.collectWords(e.children[r],t+r));return n}serialize(){function e(t){return{isEndOfWord:t.isEndOfWord,timestamp:t.timestamp,children:Object.fromEntries(Object.entries(t.children).map(([n,r])=>[n,e(r)]))}}return JSON.stringify(e(this.root))}static deserialize(e){const t=new H;function n(r){const c=new A;c.isEndOfWord=r.isEndOfWord,c.timestamp=r.timestamp;for(const[i,s]of Object.entries(r.children))c.children[i]=n(s);return c}return t.root=n(JSON.parse(e)),t}}const rt=["onKeydown"],st={class:"outline-rosybrown-300 absolute top-full right-0 left-0 rounded-b-md bg-white pt-2 outline outline-1"},lt=["onMouseenter"],it=["onClick"],ut={class:"text-rosybrown-600 overflow-hidden text-ellipsis"},at=["onClick"],ct={class:"flex flex-row-reverse items-baseline px-4 py-1"},dt=oe({__name:"SearchBar",setup(o){const e=Ce(),t=E(""),n=E([]),r=E(!1),c=E(!1),i=E(-1),s=E(!1);let l="";const a=()=>{r.value=!1,i.value=-1,s.value=!1};Te(()=>{window.addEventListener("scroll",a)}),ke(()=>{window.removeEventListener("scroll",a)});const w=(f=>{try{return f?H.deserialize(f):new H}catch(v){return console.error("反序列化前缀树时出错:",v),new H}})(localStorage.getItem("searchHistory")),b=()=>{const f=t.value;f&&(r.value=!1,c.value=!1,i.value=-1,s.value=!1,t.value="",e.push({name:"search",query:{q:f}}),queueMicrotask(()=>{try{w.insert(f);const v=w.serialize();localStorage.setItem("searchHistory",v)}catch(v){console.error("存储搜索历史失败:",v)}}))},g=Xe(()=>{r.value=!0;const f=t.value,v=w.findWords(f);if(i.value=-1,s.value=!1,v.length<2){n.value=v.map(S=>S.word);return}v.sort((S,B)=>B.timestamp-S.timestamp),n.value=v.map(S=>S.word).slice(0,10)},100),C=f=>{t.value=n.value[f],b()},N=f=>{w.delete(n.value.splice(f,1)[0]),localStorage.setItem("searchHistory",w.serialize()),f===i.value&&(i.value=-1,s.value=!1)},u=()=>{n.value=[],w.clear(),localStorage.removeItem("searchHistory"),i.value=-1,s.value=!1},d=f=>{f.target.tagName==="INPUT"&&(r.value=!0,c.value=!0)},m=f=>{s.value&&(s.value=!1),!(!r.value||n.value.length===0)&&(f==="down"?i.value=i.value===n.value.length-1?0:i.value+1:i.value=i.value<=0?n.value.length-1:i.value-1,t.value=n.value[i.value],de())},I=()=>{i.value!==-1&&n.value.length>0?C(i.value):b()},P=f=>{s.value=!0,i.value=f,l=t.value,t.value=n.value[f]},ce=()=>{s.value=!1,t.value=l},de=()=>{const f=document.querySelector("li:nth-child(".concat(i.value+1,")"));f&&f.scrollIntoView({block:"nearest"})},fe=F(()=>r.value&&n.value.length>0?["rounded-b-none","rounded-t-[24px]"]:["rounded-[3rem]"]),ve=F(()=>r.value?["backdrop-blur-xs","backdrop-brightness-90"]:["hidden"]);return(f,v)=>{const S=Ve,B=Ae;return O(),k("div",null,[h("div",{class:V(["fixed top-0 left-0 z-20 h-screen w-screen",ve.value])},null,2),R((O(),k("form",{class:V(["outline-rosybrown-300 hover:outline-rosybrown-400 outline relative z-40 flex h-12 flex-row items-center bg-white px-3 outline-2 hover:outline-[3px]",fe.value]),onSubmit:T(b,["prevent"]),onClick:d},[M(S,{width:"36",height:"36",class:"text-rosybrown-400 hover:text-rosybrown-700 cursor-pointer pl-1 mr-2",onClick:T(b,["stop"])}),R(h("input",{class:"text-rosybrown-800 h-full w-full mr-2","onUpdate:modelValue":v[0]||(v[0]=_=>t.value=_),onInput:v[1]||(v[1]=(..._)=>W(g)&&W(g)(..._)),onFocus:v[2]||(v[2]=(..._)=>W(g)&&W(g)(..._)),onKeydown:[v[3]||(v[3]=K(T(_=>m("down"),["prevent"]),["down"])),v[4]||(v[4]=K(T(_=>m("up"),["prevent"]),["up"])),K(T(I,["prevent"]),["enter"])]},null,40,rt),[[Oe,t.value,void 0,{trim:!0}]]),R(h("ul",st,[(O(!0),k(Se,null,Ee(n.value,(_,z)=>(O(),k("li",{key:z,class:V(["hover:text-rosybrown-700 box-border flex flex-row items-center justify-between border-l-4 px-4 py-1 transition-colors duration-150",[z===i.value?"border-l-rosybrown-700 bg-rosybrown-50 text-rosybrown-700":"border-l-transparent"]]),onMouseenter:X=>P(z),onMouseleave:ce},[h("div",{class:"flex w-5/6 cursor-pointer flex-row items-center font-sans",onClick:T(X=>C(z),["stop"])},[M(B,{class:"text-rosybrown-400 pr-4",style:{width:"40px"}}),h("div",ut,qe(_),1)],8,it),h("div",{class:"text-rosybrown-300 hover:text-rosybrown-500 cursor-pointer text-sm hover:underline",onClick:T(X=>N(z),["stop"])}," 删除 ",8,at)],42,lt))),128)),R(h("li",ct,[h("div",{class:"text-rosybrown-300 hover:text-rosybrown-500 cursor-pointer text-xs",onClick:T(u,["stop"])}," 清空历史 ")],512),[[Z,r.value&&n.value.length>0]])],512),[[Z,r.value&&n.value.length>0]])],34)),[[W(et),()=>{r.value=!1,i.value=-1}]])])}}}),pt=se(dt,[["__scopeId","data-v-3e5753ed"]]);export{mt as N,pt as S,se as _,ht as a};
