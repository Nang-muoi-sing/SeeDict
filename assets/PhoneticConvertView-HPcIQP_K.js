import{a as H,b,s as m,v as Y,i as q,f as c,g as n,D as _,H as P,c as u,e as T,t as p,F as $,I as G,x as J,z as K,y as Q}from"./index--aXUkqj9.js";import{_ as X}from"./PageContent.vue_vue_type_script_setup_true_lang-C_NSc0Ol.js";import{d as Z,e as k,f as I,g as F,c as ee,y as te,h as j}from"./phonetics-hMammvtn.js";import{_ as se}from"./SearchBar-CLa_zaJW.js";const ne={class:"flex flex-col gap-6 lg:flex-row"},ae={class:"flex-1 space-y-6"},re={class:"rounded-2xl bg-white p-8 md:p-10 shadow-sm ring-1 ring-wheat-200 space-y-10"},oe={class:"grid gap-8 lg:grid-cols-2"},ie={class:"space-y-4"},le={class:"flex items-center justify-between"},ce=["value"],ue=["placeholder"],pe={class:"space-y-4"},ge={class:"flex items-center justify-between"},de=["value"],fe={class:"min-h-[20rem] w-full rounded-2xl border border-wheat-200 bg-wheat-50/40 p-6 text-base leading-relaxed text-rosybrown-900"},he={key:1,class:"text-wheat-500 text-sm"},me={key:0,class:"rounded-xl bg-rose-50/80 px-3 py-2 text-sm text-rose-600"},ve={class:"font-semibold"},xe=H({__name:"PhoneticConvertView",setup(ye){const M=[{label:"榕拼键入",value:"typing"},{label:"榕拼手写",value:"cursive"},{label:"国际音标",value:"ipa"}],V={typing:"例如：uoh213 fe24 ny55",cursive:"例如：uóh fé ńg",ipa:"例如：uoʔ˨˦ fei˧˥ ŋ̍˥˥"},C=/\d+$/,g=b(""),d=b("typing"),v=b("cursive"),E=Object.entries(Z).reduce((t,[e,s])=>(t[s]||(t[s]=e),t),{}),S=Object.entries(k).map(([t,e])=>({typing:t,ipa:e})).sort((t,e)=>e.ipa.length-t.ipa.length),x={};Object.entries(I).forEach(([t,e])=>{x[e]||(x[e]=t)});const A=Object.entries(F).map(([t,e])=>({tone:t,ipa:e})).sort((t,e)=>e.ipa.length-t.ipa.length),B=t=>{var e;return(e=t.match(/\s+|\S+/g))!=null?e:[]},O=m(()=>g.value?{tokens:B(g.value).map(s=>/^\s+$/.test(s)?{text:s,raw:s,type:"whitespace"}:D(s,d.value,v.value))}:{tokens:[]}),y=m(()=>O.value.tokens),z=m(()=>y.value.some(t=>t.type!=="whitespace")),w=m(()=>y.value.filter(t=>t.type==="error"&&t.message).map(t=>"".concat(t.raw,"（").concat(t.message,"）")));function D(t,e,s){const r=t.trim();if(!r)return{text:t,raw:t,type:"whitespace"};const a=N(r,e);return a.success?{text:L(a.value,s),raw:t,type:"normal"}:{text:t,raw:t,type:"error",message:a.message}}function L(t,e){return e==="typing"?t:e==="cursive"?ee(t):te(t)}function N(t,e){return e==="typing"?R(t):e==="cursive"?U(t):W(t)}function R(t){const e=t.toLowerCase(),s=e.match(C);if(!s)return{success:!1,message:"缺少声调数字"};const r=s[0],a=e.slice(0,e.length-r.length);if(!a)return{success:!1,message:"缺少韵母部分"};const i=a.match(j);let l=i?i[0]:"",o=a.slice(l.length);return l==="ng"&&!o&&(l="",o="ng"),l in k?!o||!(o in I)?{success:!1,message:"韵母不合法"}:r in F?{success:!0,value:"".concat(l).concat(o).concat(r)}:{success:!1,message:"声调不合法"}:{success:!1,message:"声母不合法"}}function U(t){const e=t.toLowerCase(),s=e.match(j);let r=s?s[0]:"",a=e.slice(r.length);if(r==="ng"&&!a&&(r="",a="ng"),!a)return{success:!1,message:"缺少韵母部分"};const i=E[a];if(!i)return{success:!1,message:"未识别的手写韵母"};const l=i.match(C);if(!l)return{success:!1,message:"未识别声调"};const o=l[0],f=i.slice(0,i.length-o.length);return r in k?{success:!0,value:"".concat(r).concat(f).concat(o)}:{success:!1,message:"声母不合法"}}function W(t){const e=t.replace(/\//g,"").trim();if(!e)return{success:!1,message:"音节为空"};const s=A.find(h=>e.endsWith(h.ipa));if(!s)return{success:!1,message:"未识别的声调"};const r=s.tone;let a=e.slice(0,e.length-s.ipa.length),i="",l=a;const o=S.find(h=>h.ipa&&a.startsWith(h.ipa));o&&(i=o.typing,l=a.slice(o.ipa.length)),!o&&l===a&&(i="");const f=x[l];return f?{success:!0,value:"".concat(i).concat(f).concat(r)}:{success:!1,message:"未识别的韵母"}}return(t,e)=>(c(),Y(X,{"show-search-bar":!1},{default:q(()=>[n("div",ne,[n("section",ae,[e[6]||(e[6]=n("header",{class:"space-y-2"},[n("p",{class:"text-wheat-500 text-xs tracking-[0.3em]"},"gëüng guói"),n("h1",{class:"text-rosybrown-800 text-3xl font-bold"}," 工具 "),n("p",{class:"text-wheat-600 text-sm leading-6"}," 在榕拼键入、榕拼手写与国际音标之间实时转换，逐个音节校验并提示错误，帮助你快速完成不同注音方案之间的互换。 ")],-1)),n("div",re,[n("div",oe,[n("div",ie,[n("div",le,[e[3]||(e[3]=n("p",{class:"text-rosybrown-700 text-sm font-semibold"}," 输入方案 ",-1)),_(n("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),class:"rounded-lg border border-wheat-200 px-3 py-2 text-sm text-rosybrown-700 outline-none ring-wheat-200 transition focus:border-wheat-400 focus:ring-2"},[(c(),u($,null,T(M,s=>n("option",{key:s.value,value:s.value},p(s.label),9,ce)),64))],512),[[P,d.value]])]),_(n("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s),class:"min-h-[20rem] w-full rounded-2xl border border-wheat-200 bg-wheat-50/60 p-6 text-base leading-relaxed text-rosybrown-900 outline-none transition focus:border-wheat-400 focus:bg-white focus:ring-2 focus:ring-wheat-200",placeholder:V[d.value]},null,8,ue),[[G,g.value]]),e[4]||(e[4]=n("p",{class:"text-wheat-500 text-xs"}," 输入多个音节时用空格分隔，可直接粘贴整句。 ",-1))]),n("div",pe,[n("div",ge,[e[5]||(e[5]=n("p",{class:"text-rosybrown-700 text-sm font-semibold"}," 输出方案 ",-1)),_(n("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>v.value=s),class:"rounded-lg border border-wheat-200 px-3 py-2 text-sm text-rosybrown-700 outline-none ring-wheat-200 transition focus:border-wheat-400 focus:ring-2"},[(c(),u($,null,T(M,s=>n("option",{key:s.value,value:s.value},p(s.label),9,de)),64))],512),[[P,v.value]])]),n("div",fe,[z.value?(c(!0),u($,{key:0},T(y.value,(s,r)=>(c(),u("span",{key:r,class:K(["inline text-rosybrown-900",s.type==="error"&&"rounded-md bg-rose-50 px-1 text-rose-700 ring-1 ring-rose-100",s.type==="whitespace"&&"whitespace-pre"])},p(s.text),3))),128)):(c(),u("p",he," 输入左侧内容后将在此处显示转换结果 "))]),w.value.length?(c(),u("p",me,[Q(" 检测到 "+p(w.value.length)+" 个音节未能转换： ",1),n("span",ve,p(w.value.join("、")),1)])):J("",!0)])])])])])]),_:1}))}}),$e=se(xe,[["__scopeId","data-v-7fb58e60"]]);export{$e as default};
