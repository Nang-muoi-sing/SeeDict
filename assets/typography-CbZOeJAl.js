import{c as x,d as h}from"./phonetics-BQsEnJbI.js";import{d as k,j as r,c as a,b as u,e as t,t as o,u as b,F as f,a as C,l as w}from"./index-B3S_35Zh.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={key:0},Y={class:"rb"},F={class:"text-rosybrown-700"},S={key:1},$={class:"rb"},j={class:"text-rosybrown-700"},z={key:2},D={class:"text-rosybrown-700"},E=k({__name:"RubyText",props:{text:{},yngping:{}},setup(l){const e=l,p=r(()=>e.text.trim()),_=r(()=>e.yngping.trim()),g=r(()=>{const c=p.value.split(/(?:)/u),s=[];for(let n=0;n<c.length;n++)if(c[n]!=="*"){if(n===length-1){s.push(!1);continue}c[n+1]==="*"?s.push(!0):s.push(!1)}return s}),i=r(()=>p.value.replace(/\*/gu,"")),m=r(()=>i.value.split(/(?:)/u)),y=r(()=>_.value.split(" ")),v=r(()=>m.value.length===y.value.length);return(c,s)=>!e.text||!e.yngping?(u(),a("ruby",B,[t("span",Y,o(e.text??""),1),s[0]||(s[0]=t("rp",null,"(",-1)),t("rt",F,o(e.yngping??""),1),s[1]||(s[1]=t("rp",null,")",-1))])):v.value?(u(),a("ruby",z,[(u(!0),a(f,null,C(m.value,(n,d)=>(u(),a(f,{key:`${n}-${d}`},[t("span",{class:w(["rb",{"phonetic-loan-character":g.value[d]}])},o(n),3),s[4]||(s[4]=t("rp",null,"(",-1)),t("rt",D," "+o(b(h)(y.value[d]))+" ",1),s[5]||(s[5]=t("rp",null,")",-1))],64))),128))])):(u(),a("ruby",S,[t("span",$,o(i.value),1),s[2]||(s[2]=t("rp",null,"(",-1)),t("rt",j,o(b(x)(e.yngping)),1),s[3]||(s[3]=t("rp",null,")",-1))]))}}),M=T(E,[["__scopeId","data-v-0f75c68d"]]),N=l=>l.replace(/“/g,"「").replace(/”/g,"」"),Q=(l,e="second")=>{const p=/\{([^,]+),([^}]+)\}/g;return l.replace(p,(_,g,i)=>e==="first"?g:i)};export{M as _,N as r,Q as t};
