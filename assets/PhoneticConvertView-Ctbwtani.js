import{m as G,c as g,f as u,g as a,a as V,b,z as A,t as x,s as k,w as J,v as Q,i as X,h as P,D as F,H as j,e as S,F as $,x as Z,y as ee,I as te}from"./index-CSzWcP5K.js";import{b as se,c as B,d as z,e as O,f as ne,y as ae,g as E,_ as le}from"./RubyText-CrgjfLvQ.js";import{_ as re}from"./PageContent.vue_vue_type_script_setup_true_lang-FRPtlKVp.js";import"./SearchBar-S212p7GF.js";const ie={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function oe(w,h){return u(),g("svg",ie,h[0]||(h[0]=[a("path",{fill:"currentColor",d:"M14.293 2.293a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414l-4 4a1 1 0 0 1-1.414-1.414L16.586 8H5a1 1 0 0 1 0-2h11.586l-2.293-2.293a1 1 0 0 1 0-1.414m-4.586 10a1 1 0 0 1 0 1.414L7.414 16H19a1 1 0 1 1 0 2H7.414l2.293 2.293a1 1 0 0 1-1.414 1.414l-4-4a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0"},null,-1)]))}const ce=G({name:"mi-switch",render:oe}),ue={class:"relative"},pe=V({__name:"TextareaCard",props:{placeholder:{type:String,default:"placeholder"},inputAreaClass:{type:[String,Object,Array],default:""},placeholderClass:{type:[String,Object,Array],default:""}},setup(w,{expose:h}){const _=w,m=b(null),p=b(""),f=()=>{var y;if(!m.value)return;let d=((y=m.value.textContent)==null?void 0:y.trim())||"";p.value=d},v=()=>{f()},c=d=>{(["Backspace","Delete"].includes(d.key)||d.ctrlKey&&d.key==="a")&&setTimeout(f,0)};return h({data:()=>p.value}),(d,y)=>(u(),g("div",ue,[a("div",{contenteditable:"true",ref_key:"inputArea",ref:m,class:A(["bg-transparent outline-none",w.inputAreaClass]),onInput:v,onKeyup:c,onBlur:v,onCut:v},null,34),a("span",{class:A(["pointer-events-none absolute left-0 top-0 inline",{invisible:p.value.length>0},w.placeholderClass]),style:{"line-height":"inherit"}},x(_.placeholder),3)]))}}),de={class:"mb-5 flex flex-row text-4xl font-bold text-rosybrown-800"},ge={class:"relative mt-5 mb-16 space-y-5 rounded-lg bg-white"},he={class:"absolute flex w-full items-center justify-between gap-1 px-6 pt-5"},fe=["value"],me={class:"mx-4 rounded-full bg-white text-rosybrown-700 ring-8 ring-wheat-50"},ve=["value"],ye={class:"flex w-full flex-col lg:flex-row"},xe={class:"my-3 ml-3 mr-3 flex-1 rounded-xl bg-wheat-50 pt-16 lg:mr-0"},we={class:"my-3 ml-3 mr-3 flex-1 rounded-xl bg-white lg:pl-0 lg:pt-16"},be=["tabindex","data-tooltip-target"],_e=["id"],Te={key:1,class:"text-3xl font-bold text-wheat-600/50"},Ie=V({__name:"PhoneticConvertView",setup(w){const h=[{label:"榕拼键入",value:"typing"},{label:"榕拼手写",value:"cursive"},{label:"国际音标",value:"ipa"}],_={typing:"huk21 ziu53 ua242",cursive:"hǔk zìu uâ",ipa:"huʔ˨˩ t͡siu˥˧ ua˨˦˨"},m=/\d+$/,p=b("typing"),f=b("cursive"),v=b(null),c=k(()=>{var t,e;return((e=(t=v.value)==null?void 0:t.data)==null?void 0:e.call(t))||""}),d=Object.entries(se).reduce((t,[e,n])=>(t[n]||(t[n]=e),t),{}),y=Object.entries(B).map(([t,e])=>({typing:t,ipa:e})).sort((t,e)=>e.ipa.length-t.ipa.length),I={};Object.entries(z).forEach(([t,e])=>{I[e]||(I[e]=t)});const L=Object.entries(O).map(([t,e])=>({tone:t,ipa:e})).sort((t,e)=>e.ipa.length-t.ipa.length),R=t=>{var e;return(e=t.match(/\s+|\S+/g))!=null?e:[]},D=k(()=>c.value?{tokens:R(c.value).map(n=>/^\s+$/.test(n)?{text:n,raw:n,type:"whitespace"}:N(n,p.value,f.value))}:{tokens:[]}),M=k(()=>D.value.tokens),H=k(()=>M.value.some(t=>t.type!=="whitespace"));function N(t,e,n){const l=t.trim();if(!l)return{text:t,raw:t,type:"whitespace"};const s=U(l,e);return s.success?{text:K(s.value,n),raw:t,type:"normal"}:{text:t,raw:t,type:"error",message:s.message}}function K(t,e){return e==="typing"?t:e==="cursive"?ne(t):ae(t)}function U(t,e){return e==="typing"?W(t):e==="cursive"?Y(t):q(t)}function W(t){const e=t.toLowerCase(),n=e.match(m);if(!n)return{success:!1,message:"缺少声调数字"};const l=n[0],s=e.slice(0,e.length-l.length);if(!s)return{success:!1,message:"缺少韵母部分"};const r=s.match(E);let o=r?r[0]:"",i=s.slice(o.length);return o==="ng"&&!i&&(o="",i="ng"),o in B?!i||!(i in z)?{success:!1,message:"韵母不合法"}:l in O?{success:!0,value:"".concat(o).concat(i).concat(l)}:{success:!1,message:"声调不合法"}:{success:!1,message:"声母不合法"}}function Y(t){const e=t.toLowerCase(),n=e.match(E);let l=n?n[0]:"",s=e.slice(l.length);if(l==="ng"&&!s&&(l="",s="ng"),!s)return{success:!1,message:"缺少韵母部分"};const r=d[s];if(!r)return{success:!1,message:"未识别的手写韵母"};const o=r.match(m);if(!o)return{success:!1,message:"未识别声调"};const i=o[0],T=r.slice(0,r.length-i.length);return l in B?{success:!0,value:"".concat(l).concat(T).concat(i)}:{success:!1,message:"声母不合法"}}function q(t){const e=t.replace(/\//g,"").trim();if(!e)return{success:!1,message:"音节为空"};const n=L.find(C=>e.endsWith(C.ipa));if(!n)return{success:!1,message:"未识别的声调"};const l=n.tone;let s=e.slice(0,e.length-n.ipa.length),r="",o=s;const i=y.find(C=>C.ipa&&s.startsWith(C.ipa));i&&(r=i.typing,o=s.slice(i.ipa.length)),!i&&o===s&&(r="");const T=I[o];return T?{success:!0,value:"".concat(r).concat(T).concat(l)}:{success:!1,message:"未识别的韵母"}}return J(()=>M.value,()=>{setTimeout(()=>{te()},0)},{deep:!0}),(t,e)=>{const n=le,l=ce;return u(),Q(re,{"show-search-bar":!1},{default:X(()=>[a("div",null,[a("div",de,[P(n,{text:"工具",yngping:"geoyng55 geoy242"})]),e[2]||(e[2]=a("div",{class:"space-y-2 text-sm font-semibold text-rosybrown-600"},[a("p",null," 在榕拼键入、榕拼手写与国际音标之间实时转换，逐个音节校验并提示错误，帮助你快速完成不同注音方案之间的互换。 ")],-1))]),a("div",ge,[a("div",he,[F(a("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>p.value=s),class:"w-full rounded-lg border border-wheat-200 bg-wheat-50/50 px-3 py-1.5 font-plain text-sm text-rosybrown-700 ring-wheat-200 transition hover:border-wheat-400"},[(u(),g($,null,S(h,s=>a("option",{key:s.value,value:s.value},x(s.label),9,fe)),64))],512),[[j,p.value]]),a("div",me,[P(l,{class:"m-2"})]),F(a("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>f.value=s),class:"w-full rounded-lg border border-wheat-200 bg-wheat-50/50 px-3 py-1.5 font-plain text-sm text-rosybrown-700 ring-wheat-200 transition hover:border-wheat-400"},[(u(),g($,null,S(h,s=>a("option",{key:s.value,value:s.value},x(s.label),9,ve)),64))],512),[[j,f.value]])]),a("div",ye,[a("div",xe,[P(pe,{ref_key:"inputArea",ref:v,placeholder:_[p.value],"placeholder-class":"px-6 text-3xl font-bold text-wheat-600/50 leading-relaxed","input-area-class":{"h-full min-h-[10rem] w-full break-all px-6 pb-6 leading-relaxed text-rosybrown-800 lg:min-h-[20rem]":!0,"text-3xl font-bold":c.value.length<120,"text-xl font-bold":c.value.length>=120&&c.value.length<280}},null,8,["placeholder","input-area-class"])]),a("div",we,[a("div",{class:A(["h-full min-h-[10rem] w-full break-all px-6 pb-6 leading-relaxed text-rosybrown-800 lg:min-h-[20rem]",{"text-3xl font-bold":c.value.length<120,"text-xl font-bold":c.value.length>=120&&c.value.length<280}]),style:{position:"relative"}},[H.value?(u(!0),g($,{key:0},S(M.value,(s,r)=>(u(),g($,{key:r},[a("span",{tabindex:s.type==="error"&&s.message?0:void 0,"data-tooltip-target":s.type==="error"&&s.message?"tooltip-".concat(r):void 0,class:A(["inline text-rosybrown-800",{"cursor-pointer rounded-md bg-rose-50 px-1 ring-1 ring-rose-100":s.type==="error","whitespace-pre-wrap":s.type==="whitespace"}])},x(s.text),11,be),s.type==="error"&&s.message?(u(),g("div",{key:0,id:"tooltip-".concat(r),role:"tooltip",class:"tooltip invisible absolute z-50 inline-block rounded-xl bg-rosybrown-900 px-3 py-2 text-sm text-wheat-50 opacity-0 transition-opacity duration-500"},[ee(x(s.message)+" ",1),e[3]||(e[3]=a("div",{class:"tooltip-arrow","data-popper-arrow":""},null,-1))],8,_e)):Z("",!0)],64))),128)):(u(),g("span",Te,x(_[f.value]),1))],2)])])])]),_:1})}}});export{Ie as default};
