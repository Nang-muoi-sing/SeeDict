import{p as P,c as p,f as c,g as a,a as R,b,z as V,y as w,t as A,w as X,v as Z,i as S,h as _,D as j,H as F,e as I,F as M,x as ee,k as q,I as te}from"./index-2zQ-b5OQ.js";import{b as ne,c as O,d as se,e as ae,f as le,y as re,g as oe,h as ie,R as ce}from"./RubyText-CtWs5r77.js";import{_ as ue}from"./PageContent.vue_vue_type_script_setup_true_lang-QLU4zC0Z.js";import{_ as pe}from"./ToastTip.vue_vue_type_script_setup_true_lang-DoBLCx_z.js";import"./SearchBar-CQD2p06T.js";const de={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ge(f,i){return c(),p("svg",de,i[0]||(i[0]=[a("path",{fill:"currentColor",d:"M9 18q-.825 0-1.412-.587T7 16V4q0-.825.588-1.412T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.587 1.413T18 18zm-4 4q-.825 0-1.412-.587T3 20V6h2v14h11v2z"},null,-1)]))}const he=P({name:"material-symbols-content-copy",render:ge}),me={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function fe(f,i){return c(),p("svg",me,i[0]||(i[0]=[a("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zm2-4h2V8H9zm4 0h2V8h-2z"},null,-1)]))}const ve=P({name:"material-symbols-delete",render:fe}),xe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ye(f,i){return c(),p("svg",xe,i[0]||(i[0]=[a("path",{fill:"currentColor",d:"M14.293 2.293a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414l-4 4a1 1 0 0 1-1.414-1.414L16.586 8H5a1 1 0 0 1 0-2h11.586l-2.293-2.293a1 1 0 0 1 0-1.414m-4.586 10a1 1 0 0 1 0 1.414L7.414 16H19a1 1 0 1 1 0 2H7.414l2.293 2.293a1 1 0 0 1-1.414 1.414l-4-4a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0"},null,-1)]))}const _e=P({name:"mi-switch",render:ye}),we={class:"relative"},be=R({__name:"TextareaCard",props:{placeholder:{type:String,default:"placeholder"},inputAreaClass:{type:[String,Object,Array],default:""},placeholderClass:{type:[String,Object,Array],default:""}},setup(f,{expose:i}){const T=f,h=b(null),d=b(""),v=()=>{var y;if(!h.value)return;let m=((y=h.value.textContent)==null?void 0:y.trim())||"";d.value=m},x=()=>{v()},C=m=>{(["Backspace","Delete"].includes(m.key)||m.ctrlKey&&m.key==="a")&&setTimeout(v,0)};return i({data:()=>d.value,clear:()=>{h.value&&(h.value.textContent="",d.value="")}}),(m,y)=>(c(),p("div",we,[a("div",{contenteditable:"true",ref_key:"inputArea",ref:h,class:V(["bg-transparent outline-none",f.inputAreaClass]),onInput:x,onKeyup:C,onBlur:x,onCut:x},null,34),a("span",{class:V(["pointer-events-none absolute left-0 top-0 inline",{invisible:d.value.length>0},f.placeholderClass]),style:{"line-height":"inherit"}},w(T.placeholder),3)]))}}),Te={class:"mb-5 flex flex-row text-4xl font-bold text-rosybrown-800"},Ce={class:"relative mb-16 mt-5 space-y-5 rounded-lg bg-white"},ke={class:"absolute flex w-full items-center justify-between gap-1 px-6 pt-5"},$e=["value"],Ae={class:"mx-2 rounded-full bg-white text-rosybrown-700 ring-8 ring-wheat-50"},Me=["value"],Ve={class:"flex w-full flex-col lg:flex-row"},ze={class:"my-3 ml-3 mr-3 flex flex-1 flex-col rounded-xl bg-wheat-50 pt-16 lg:mr-0"},Ie={class:"bg-red mt-auto px-6 py-3"},Pe={class:"my-3 ml-3 mr-3 flex flex-1 flex-col rounded-xl bg-white lg:pl-0 lg:pt-16"},Be=["tabindex","data-tooltip-target"],Se=["id"],je={key:1,class:"select-none text-3xl font-bold text-wheat-600/50"},Fe={class:"mt-auto px-6 py-3"},De=R({__name:"PhoneticConvertView",setup(f){const i=[{label:"榕拼键入",value:"typing"},{label:"榕拼手写",value:"cursive"},{label:"国际音标",value:"ipa"}],T={typing:"huk21 ziu53 ua242",cursive:"hǔk zìu uâ",ipa:"huʔ˨˩ t͡siu˥˧ ua˨˦˨"},h=/\d+$/,d=b("typing"),v=b("cursive"),x=b(null),C=b(null),g=A(()=>{var e,t;return((t=(e=x.value)==null?void 0:e.data)==null?void 0:t.call(e))||""}),m=Object.entries(ne).reduce((e,[t,s])=>(e[s]||(e[s]=t),e),{}),y=Object.entries(O).map(([e,t])=>({typing:e,ipa:t})).sort((e,t)=>t.ipa.length-e.ipa.length),z={};Object.entries(se).forEach(([e,t])=>{z[t]||(z[t]=e)});const E=Object.entries(ae).map(([e,t])=>({tone:e,ipa:t})).sort((e,t)=>t.ipa.length-e.ipa.length),H=e=>{var t;return(t=e.match(/\s+|\S+/g))!=null?t:[]},D=A(()=>g.value?{tokens:H(g.value).map(s=>/^\s+$/.test(s)?{text:s,raw:s,type:"whitespace"}:K(s,d.value,v.value))}:{tokens:[]}),k=A(()=>D.value.tokens),N=A(()=>k.value.some(e=>e.type!=="whitespace"));function K(e,t,s){const r=e.trim();if(!r)return{text:e,raw:e,type:"whitespace"};const l=U(r,t);if(!l.success)return{text:e,raw:e,type:"error",message:l.message};const o=L(l.value,s);return o?{text:o,raw:e,type:"normal"}:{text:e,raw:e,type:"error",message:"未识别音节"}}function L(e,t){return t==="typing"?e:t==="cursive"?le(e):re(e)}function U(e,t){return t==="typing"?W(e):t==="cursive"?Y(e):G(e)}function W(e){const t=e.match(h);if(!t)return{success:!1,message:"缺少声调"};if(!e.slice(0,e.length-t[0].length))return{success:!1,message:"缺少韵母"};const[r,l,o]=oe(e);return r===null?{success:!1,message:"声母不合法"}:l===null?{success:!1,message:"韵母不合法"}:o===null?{success:!1,message:"声调不合法"}:{success:!0,value:"".concat(r).concat(l).concat(o)}}function Y(e){const t=e.match(ie);let s=t?t[0]:"",r=e.slice(s.length);if(s==="ng"&&!r&&(s="",r="ng"),!r)return{success:!1,message:"缺少韵母"};const l=m[r];if(!l)return{success:!1,message:"未识别韵母"};const o=l.match(h);if(!o)return{success:!1,message:"未识别声调"};const n=o[0],u=l.slice(0,l.length-n.length);return s in O?{success:!0,value:"".concat(s).concat(u).concat(n)}:{success:!1,message:"声母不合法"}}function G(e){const t=e.replace(/\//g,"").trim();if(!t)return{success:!1,message:"音节为空"};const s=E.find($=>t.endsWith($.ipa));if(!s)return{success:!1,message:"未识别声调"};const r=s.tone;let l=t.slice(0,t.length-s.ipa.length),o="",n=l;const u=y.find($=>$.ipa&&l.startsWith($.ipa));u&&(o=u.typing,n=l.slice(u.ipa.length)),!u&&n===l&&(o="");const B=z[n];return B?{success:!0,value:"".concat(o).concat(B).concat(r)}:{success:!1,message:"未识别韵母"}}const J=()=>{var e;(e=x.value)==null||e.clear()},Q=async()=>{var t;const e=k.value.map(s=>s.text).join("");if(e)try{await navigator.clipboard.writeText(e),(t=C.value)==null||t.tip()}catch(s){console.error("复制失败:",s)}};return X(()=>k.value,()=>{setTimeout(()=>{te()},0)},{deep:!0}),(e,t)=>{const s=ce,r=_e,l=ve,o=he;return c(),Z(ue,{"show-search-bar":!1},{default:S(()=>[a("div",null,[a("div",Te,[_(s,{text:"榕拼转换",yngping:"yng55 ping55 duong55 uang242"})]),t[2]||(t[2]=a("div",{class:"space-y-2 text-sm font-semibold text-rosybrown-600"},[a("p",null," 在榕拼键入、榕拼手写与国际音标之间实时转换，逐个音节校验并提示错误，帮助你快速完成不同注音方案之间的互换。 ")],-1))]),a("div",Ce,[a("div",ke,[j(a("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>d.value=n),class:"w-full rounded-lg border border-wheat-200 bg-wheat-50/50 px-3 py-1.5 font-plain text-sm text-rosybrown-700 ring-wheat-200 transition hover:border-wheat-400"},[(c(),p(M,null,I(i,n=>a("option",{key:n.value,value:n.value},w(n.label),9,$e)),64))],512),[[F,d.value]]),a("div",Ae,[_(r,{class:"m-2"})]),j(a("select",{"onUpdate:modelValue":t[1]||(t[1]=n=>v.value=n),class:"w-full rounded-lg border border-wheat-200 bg-wheat-50/50 px-3 py-1.5 font-plain text-sm text-rosybrown-700 ring-wheat-200 transition hover:border-wheat-400"},[(c(),p(M,null,I(i,n=>a("option",{key:n.value,value:n.value},w(n.label),9,Me)),64))],512),[[F,v.value]])]),a("div",Ve,[a("div",ze,[_(be,{ref_key:"inputArea",ref:x,placeholder:T[d.value],"placeholder-class":"px-6 text-3xl font-bold text-wheat-600/50 leading-relaxed","input-area-class":{"h-full min-h-[10rem] w-full break-all px-6 leading-relaxed text-rosybrown-800 lg:min-h-[20rem]":!0,"text-3xl font-bold":g.value.length<120,"text-xl font-bold":g.value.length>=120&&g.value.length<280}},null,8,["placeholder","input-area-class"]),a("div",Ie,[a("button",{onClick:J,class:"origin-center rounded-lg bg-wheat-100 p-1.5 text-wheat-500 transition-transform duration-300 hover:bg-wheat-200 active:scale-95"},[_(l,{class:"scale-100 transition-transform duration-300 active:scale-95"})])])]),a("div",Pe,[a("div",{class:V(["h-full min-h-[10rem] w-full break-all px-6 leading-relaxed text-rosybrown-800 lg:min-h-[20rem]",{"text-3xl font-bold":g.value.length<120,"text-xl font-bold":g.value.length>=120&&g.value.length<280}])},[N.value?(c(!0),p(M,{key:0},I(k.value,(n,u)=>(c(),p(M,{key:u},[a("span",{tabindex:n.type==="error"&&n.message?0:void 0,"data-tooltip-target":n.type==="error"&&n.message?"tooltip-".concat(u):void 0,class:V(["inline text-rosybrown-800",{"cursor-pointer rounded-md bg-rose-50 px-1 ring-1 ring-rose-100":n.type==="error","whitespace-pre-wrap":n.type==="whitespace"}])},w(n.text),11,Be),n.type==="error"&&n.message?(c(),p("div",{key:0,id:"tooltip-".concat(u),role:"tooltip",class:"tooltip invisible absolute z-50 inline-block rounded-xl bg-rosybrown-900 px-3 py-2 text-sm text-wheat-50 opacity-0 transition-opacity duration-500"},[q(w(n.message)+" ",1),t[3]||(t[3]=a("div",{class:"tooltip-arrow","data-popper-arrow":""},null,-1))],8,Se)):ee("",!0)],64))),128)):(c(),p("span",je,w(T[v.value]),1))],2),a("div",Fe,[a("button",{onClick:Q,class:"origin-center rounded-lg bg-wheat-100 p-1.5 text-wheat-500 transition-transform duration-300 hover:bg-wheat-200 active:scale-95"},[_(o,{class:"scale-100 transition-transform duration-300 active:scale-95"})])]),_(pe,{ref_key:"copyTip",ref:C},{default:S(()=>t[4]||(t[4]=[q("已复制结果")])),_:1},512)])])])]),_:1})}}});export{De as default};
