import{m as x,c as r,b as e,e as o,d as S,j as V,k as H,h as g,u as c,R as b,l as k,p as B,w as q,F as h,a as v,q as R,t as y,s as I,r as P,v as M,o as D,x as T,i as E,y as F}from"./index-DIZKi3Fq.js";import{_ as G}from"./PageContent.vue_vue_type_script_setup_true_lang-DiOjAJD2.js";import{s as U,m as Y}from"./phonetics-DPRH1uoy.js";import{r as A,t as J}from"./typography-CV6tYAYU.js";import"./NavBar-DZdQCw9G.js";import"./SearchBar-CeElTqrC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Footer-CIToTcTO.js";const K={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function O(d,t){return e(),r("svg",K,t[0]||(t[0]=[o("path",{fill:"currentColor",d:"M7.5 22q-1.45 0-2.475-1.025T4 18.5v-13q0-1.45 1.025-2.475T7.5 2H18q.825 0 1.413.587T20 4v12.525q0 .2-.162.363t-.588.362q-.35.175-.55.5t-.2.75t.2.763t.55.487t.55.413t.2.562v.25q0 .425-.288.725T19 22zM9 15q.425 0 .713-.288T10 14V5q0-.425-.288-.712T9 4t-.712.288T8 5v9q0 .425.288.713T9 15m-1.5 5h9.325q-.15-.35-.237-.712T16.5 18.5q0-.4.075-.775t.25-.725H7.5q-.65 0-1.075.438T6 18.5q0 .65.425 1.075T7.5 20"},null,-1)]))}const Q=x({name:"material-symbols-book2-rounded",render:O}),W={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function X(d,t){return e(),r("svg",W,t[0]||(t[0]=[o("path",{fill:"currentColor",d:"M11.75 19h-.25q-3.55 0-6.025-2.475T3 10.5t2.475-6.025T11.5 2q1.775 0 3.313.662t2.7 1.825t1.824 2.7T20 10.5q0 3.35-1.888 6.225t-4.762 4.5q-.25.125-.5.138t-.45-.113t-.35-.325t-.175-.475zm-.275-3.025q.425 0 .725-.3t.3-.725t-.3-.725t-.725-.3t-.725.3t-.3.725t.3.725t.725.3M9.3 8.375q.275.125.55.013t.45-.363q.225-.3.525-.463T11.5 7.4q.6 0 .975.337t.375.863q0 .325-.187.65t-.663.8q-.625.55-.925 1.038t-.3.987q0 .3.213.513t.512.212t.5-.225t.3-.525q.125-.425.45-.775t.6-.625q.525-.525.788-1.05t.262-1.05q0-1.15-.788-1.85T11.5 6q-.8 0-1.475.388t-1.1 1.062q-.15.275-.038.538t.413.387"},null,-1)]))}const Z=x({name:"material-symbols-contact-support-rounded",render:X}),tt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function et(d,t){return e(),r("svg",tt,t[0]||(t[0]=[o("path",{fill:"currentColor",d:"m14.475 12l-7.35-7.35q-.375-.375-.363-.888t.388-.887t.888-.375t.887.375l7.675 7.7q.3.3.45.675t.15.75t-.15.75t-.45.675l-7.7 7.7q-.375.375-.875.363T7.15 21.1t-.375-.888t.375-.887z"},null,-1)]))}const st=x({name:"material-symbols-arrow-forward-ios-rounded",render:et}),at={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ot(d,t){return e(),r("svg",at,t[0]||(t[0]=[o("path",{fill:"currentColor",d:"m9.55 12l7.35 7.35q.375.375.363.875t-.388.875t-.875.375t-.875-.375l-7.7-7.675q-.3-.3-.45-.675t-.15-.75t.15-.75t.45-.675l7.7-7.7q.375-.375.888-.363t.887.388t.375.875t-.375.875z"},null,-1)]))}const rt=x({name:"material-symbols-arrow-back-ios-new-rounded",render:ot}),nt={key:0,class:"text-center"},lt={class:"text-rosybrown-800 inline-flex space-x-2 text-sm"},ut={class:""},it={key:0,class:"flex h-8 cursor-default items-center justify-center px-2"},ct={key:1},$=7,j=5,dt=S({__name:"Pagination",props:{curPage:{},totalPage:{}},setup(d){const t=d,f=B(),i=V(()=>{const{curPage:n,totalPage:l}=t,u=[];if(l<=$){for(let s=1;s<=l;s++)u.push(s);return u}if(u.push(1),n<$-2){for(let s=2;s<=$;s++)u.push(s);return u}u.push("...");const w=Math.min(l,n+(j-1)/2),a=w-j+1;for(let s=a;s<=w;s++)u.push(s);return u});return(n,l)=>{const u=rt,w=st;return t.totalPage>1?(e(),r("nav",nt,[o("ul",lt,[o("li",ut,[g(c(b),{to:{name:"search",query:{...c(f).query,page:t.curPage-1}},class:k(["text-rosybrown-600 flex h-8 w-8 items-center justify-center rounded-full leading-tight",{"cursor-default opacity-50":t.curPage===1,"hover:text-rosybrown-800":t.curPage>1}]),disabled:t.curPage===1},{default:q(()=>[g(u)]),_:1},8,["to","class","disabled"])]),(e(!0),r(h,null,v(i.value,a=>(e(),r(h,{key:a},[a==="..."?(e(),r("li",it,l[0]||(l[0]=[o("span",null,"…",-1)]))):(e(),r("li",ct,[g(c(b),{to:{name:"search",query:{...c(f).query,page:a}},class:k(["flex h-8 w-8 items-center justify-center rounded-full leading-tight",{"bg-rosybrown-800 text-wheat-50":a===t.curPage,"hover:bg-wheat-100":a!==t.curPage}])},{default:q(()=>[R(y(a),1)]),_:2},1032,["to","class"])]))],64))),128)),o("li",null,[g(c(b),{to:{name:"search",query:{...c(f).query,page:t.curPage+1}},class:k(["text-rosybrown-600 flex h-8 w-8 items-center justify-center rounded-full leading-tight",{"cursor-default opacity-50":t.curPage===t.totalPage,"hover:text-rosybrown-800":t.curPage<t.totalPage}]),disabled:t.curPage===t.totalPage},{default:q(()=>[g(w)]),_:1},8,["to","class","disabled"])])])])):H("",!0)}}}),mt=S({__name:"SearchSkeleton",props:{number:{default:10}},setup(d){const t=d;return(f,i)=>(e(),r(h,null,[i[1]||(i[1]=o("div",{class:"animate-pulse"},[o("div",{class:"bg-wheat-200 mb-2.5 h-6 w-[30%] rounded-lg px-2 py-1 sm:w-32"}),o("div",{class:"bg-wheat-100 mb-2 h-3 w-[40%] rounded-lg px-2 sm:w-50"})],-1)),(e(!0),r(h,null,v(t.number,n=>(e(),r("div",{key:n,class:"bg-wheat-100 my-5 px-5 py-4"},i[0]||(i[0]=[I('<div class="animate-pulse"><div class="flex justify-end"><div class="bg-wheat-200 mb-3 h-3 w-[35%] rounded-lg sm:w-32"></div></div><div class="bg-wheat-200 mb-5 h-6 w-[30%] rounded-lg sm:w-28"></div><div class="bg-wheat-200 mb-2.5 h-3 w-[80%] rounded-lg sm:w-85 md:w-135"></div><div class="bg-wheat-200 mb-2.5 h-3 w-[65%] rounded-lg sm:w-70 md:w-105"></div><div class="bg-wheat-200 mb-2.5 h-3 w-[70%] rounded-lg sm:w-75 md:w-120"></div></div>',1)])))),128))],64))}}),pt={class:"bg-wheat-300 mb-2.5 w-fit rounded-lg px-2 py-1 text-xl text-white"},_t={class:"text-rosybrown-600 mb-2 px-2 text-sm"},gt={class:"bg-wheat-100 my-5 px-5 py-4"},ht={class:"text-wheat-500 flex flex-wrap justify-end gap-2 text-sm"},ft={key:0,class:"flex items-center"},wt={class:"ruby-container text-rosybrown-800 xxl:text-4xl text-3xl font-bold break-all whitespace-normal"},yt=["innerHTML"],qt={class:"text-wheat-600 mt-2"},St=S({__name:"SearchView",setup(d){const t=B(),f=F(),i=P(!1),n=P({q:t.query.q||"",page:parseInt(t.query.page||"1",10)}),l=P({status:0,data:{q:"",currentPage:0,totalPage:0,totalResult:0,results:[]}}),u=()=>{document.title=t.query.q?`${t.query.q} - 检索`:"米时典 SeeDict - 检索"},w=async()=>{i.value=!0;try{const a=new URLSearchParams;a.append("q",n.value.q),n.value.page>1&&a.append("page",n.value.page.toString());const s=`https://seedict.com/api/v1/search?${a}`,m=await fetch(s);if(!m.ok)throw new Error(`HTTP错误: ${m.status}`);const p=await m.json();l.value=p,n.value.page>1&&p.data.totalResult===0&&(n.value.page=1,f.push({query:{q:n.value.q,page:1}}))}catch(a){console.error("搜索请求失败:",a)}finally{i.value=!1}};return M([()=>t.query.q,()=>t.query.page],([a,s])=>{typeof a=="string"&&(n.value.q=a);let m=1;if(typeof s=="string"){const p=parseInt(s,10);!isNaN(p)&&p>0&&(m=p)}n.value.page=m,n.value.q&&w()},{immediate:!0}),D(()=>{u()}),M(()=>t.query.q,u),(a,s)=>{const m=Z,p=Q,N=E("RouterLink");return e(),T(G,null,{default:q(()=>[i.value?(e(),T(mt,{key:0})):(e(),r(h,{key:1},[o("div",pt," 查询："+y(n.value.q),1),o("span",_t,y(l.value.data.totalResult?`共 ${l.value.data.totalResult} 个相关结果`:"没有找到相关结果"),1),(e(!0),r(h,null,v(l.value.data.results,_=>(e(),T(N,{class:"block",to:{name:"word",query:{w:_.w}},key:_.w},{default:q(()=>{var C;return[o("div",gt,[o("div",ht,[((C=_.refs)==null?void 0:C.length)==0&&!_.brief?(e(),r("span",ft,[g(m,{style:{"font-size":"16px"}}),s[0]||(s[0]=R(" 暂未释义"))])):(e(!0),r(h,{key:1},v(_.refs,(z,L)=>(e(),r("span",{class:"flex items-center",key:L},[g(p,{style:{"font-size":"16px"}}),R(" "+y(c(U)[z]??""),1)]))),128))]),o("div",wt,[o("ruby",{innerHTML:c(Y)(_.text,_.pron,"text-rosybrown-700"),style:{"ruby-align":"center"}},null,8,yt)]),o("p",qt,y(c(A)(c(J)(_.brief))),1)])]}),_:2},1032,["to"]))),128)),g(dt,{"cur-page":l.value.data.currentPage,"total-page":l.value.data.totalPage},null,8,["cur-page","total-page"])],64))]),_:1})}}});export{St as default};
