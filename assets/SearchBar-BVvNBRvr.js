var ve=Object.defineProperty;var he=(o,e,t)=>e in o?ve(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var C=(o,e,t)=>he(o,typeof e!="symbol"?e+"":e,t);import{d as oe,b as k,g as m,q as me,f as O,h as z,w as R,i as pe,s as B,m as ne,l as X,G as y,H as we,I as ye,J as be,K as ge,r as E,L as _e,c as A,v as q,M as re,o as xe,j as Te,B as L,x as V,A as T,N as K,O as ke,F as Oe,e as Se,C as Z,D as Ee,t as Ce}from"./index-NRJhp6fU.js";const qe={class:"bg-wheat-50"},We={class:"bg-rosybrown-800 h-56 rounded-t-[48px] text-center"},$e={class:"flex flex-col pt-20"},ft=oe({__name:"Footer",setup(o){return(e,t)=>(O(),k("div",qe,[m("div",We,[m("div",$e,[t[1]||(t[1]=m("span",{class:"text-sans text-rosybrown-50 mb-2"},"© 2025 米时典 SeeDict ",-1)),me("",!0)])])]))}}),se=(o,e)=>{const t=o.__vccOpts||o;for(const[n,r]of e)t[n]=r;return t},Ie={},Me={class:"flex h-full flex-row justify-between rounded-lg bg-white"},De={class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"},ze={class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"},He={class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"};function Ne(o,e){const t=pe("RouterLink");return O(),k("div",Me,[m("div",De,[z(t,{to:{name:"home"}},{default:R(()=>e[0]||(e[0]=[B("主页")])),_:1})]),m("div",ze,[z(t,{to:{name:"tutorial"}},{default:R(()=>e[1]||(e[1]=[B("入门")])),_:1})]),e[3]||(e[3]=m("div",{class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"},[m("a",{href:"https://jcnf40n3hvft.feishu.cn/docx/FSqidtsgjo25x0x6R1KcChopnTc",target:"_blank"},"帮助")],-1)),m("div",He,[z(t,{to:{name:"about"}},{default:R(()=>e[2]||(e[2]=[B("关于")])),_:1})])])}const vt=se(Ie,[["render",Ne]]),je={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Le(o,e){return O(),k("svg",je,e[0]||(e[0]=[m("path",{fill:"currentColor",d:"M12 21q-3.15 0-5.575-1.912T3.275 14.2q-.1-.375.15-.687t.675-.363q.4-.05.725.15t.45.6q.6 2.25 2.475 3.675T12 19q2.925 0 4.963-2.037T19 12t-2.037-4.962T12 5q-1.725 0-3.225.8T6.25 8H8q.425 0 .713.288T9 9t-.288.713T8 10H4q-.425 0-.712-.288T3 9V5q0-.425.288-.712T4 4t.713.288T5 5v1.35q1.275-1.6 3.113-2.475T12 3q1.875 0 3.513.713t2.85 1.924t1.925 2.85T21 12t-.712 3.513t-1.925 2.85t-2.85 1.925T12 21m1-9.4l2.5 2.5q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-2.8-2.8q-.15-.15-.225-.337T11 11.975V8q0-.425.288-.712T12 7t.713.288T13 8z"},null,-1)]))}const Pe=ne({name:"material-symbols-history-rounded",render:Le}),Ae={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Fe(o,e){return O(),k("svg",Ae,e[0]||(e[0]=[m("path",{fill:"currentColor",d:"M9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l5.6 5.6q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-5.6-5.6q-.75.6-1.725.95T9.5 16m0-2q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14"},null,-1)]))}const Re=ne({name:"material-symbols-search-rounded",render:Fe});function le(o){return we()?(ye(o),!0):!1}const ie=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Be=Object.prototype.toString,Ve=o=>Be.call(o)==="[object Object]",_=()=>{},Y=Ke();function Ke(){var o,e;return ie&&((o=window==null?void 0:window.navigator)==null?void 0:o.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Ge(...o){if(o.length!==1)return be(...o);const e=o[0];return typeof e=="function"?ge(_e(()=>({get:e,set:_}))):E(e)}function Je(o,e){function t(...n){return new Promise((r,a)=>{Promise.resolve(o(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(r).catch(a)})}return t}function Ue(o,e={}){let t,n,r=_;const a=l=>{clearTimeout(l),r(),r=_};let i;return l=>{const c=y(o),h=y(e.maxWait);return t&&a(t),c<=0||h!==void 0&&h<=0?(n&&(a(n),n=null),Promise.resolve(l())):new Promise((w,b)=>{r=e.rejectOnCancel?b:w,i=l,h&&!n&&(n=setTimeout(()=>{t&&a(t),n=null,w(i())},h)),t=setTimeout(()=>{n&&a(n),n=null,w(l())},c)})}}function G(o){return Array.isArray(o)?o:[o]}function Ye(o,e=200,t={}){return Je(Ue(e,t),o)}function Xe(o,e,t){return X(o,e,{...t,immediate:!0})}const ue=ie?window:void 0;function D(o){var e;const t=y(o);return(e=t==null?void 0:t.$el)!=null?e:t}function W(...o){const e=[],t=()=>{e.forEach(s=>s()),e.length=0},n=(s,l,c,h)=>(s.addEventListener(l,c,h),()=>s.removeEventListener(l,c,h)),r=A(()=>{const s=G(y(o[0])).filter(l=>l!=null);return s.every(l=>typeof l!="string")?s:void 0}),a=Xe(()=>{var s,l;return[(l=(s=r.value)==null?void 0:s.map(c=>D(c)))!=null?l:[ue].filter(c=>c!=null),G(y(r.value?o[1]:o[0])),G(q(r.value?o[2]:o[1])),y(r.value?o[3]:o[2])]},([s,l,c,h])=>{if(t(),!(s!=null&&s.length)||!(l!=null&&l.length)||!(c!=null&&c.length))return;const w=Ve(h)?{...h}:h;e.push(...s.flatMap(b=>l.flatMap(x=>c.map($=>n(b,x,$,w)))))},{flush:"post"}),i=()=>{a(),t()};return le(t),i}let ee=!1;function te(o,e,t={}){const{window:n=ue,ignore:r=[],capture:a=!0,detectIframe:i=!1,controls:s=!1}=t;if(!n)return s?{stop:_,cancel:_,trigger:_}:_;if(Y&&!ee){ee=!0;const u={passive:!0};Array.from(n.document.body.children).forEach(d=>W(d,"click",_,u)),W(n.document.documentElement,"click",_,u)}let l=!0;const c=u=>y(r).some(d=>{if(typeof d=="string")return Array.from(n.document.querySelectorAll(d)).some(p=>p===u.target||u.composedPath().includes(p));{const p=D(d);return p&&(u.target===p||u.composedPath().includes(p))}});function h(u){const d=y(u);return d&&d.$.subTree.shapeFlag===16}function w(u,d){const p=y(u),I=p.$.subTree&&p.$.subTree.children;return I==null||!Array.isArray(I)?!1:I.some(j=>j.el===d.target||d.composedPath().includes(j.el))}const b=u=>{const d=D(o);if(u.target!=null&&!(!(d instanceof Element)&&h(o)&&w(o,u))&&!(!d||d===u.target||u.composedPath().includes(d))){if("detail"in u&&u.detail===0&&(l=!c(u)),!l){l=!0;return}e(u)}};let x=!1;const $=[W(n,"click",u=>{x||(x=!0,setTimeout(()=>{x=!1},0),b(u))},{passive:!0,capture:a}),W(n,"pointerdown",u=>{const d=D(o);l=!c(u)&&!!(d&&!u.composedPath().includes(d))},{passive:!0}),i&&W(n,"blur",u=>{setTimeout(()=>{var d;const p=D(o);((d=n.document.activeElement)==null?void 0:d.tagName)==="IFRAME"&&!(p!=null&&p.contains(n.document.activeElement))&&e(u)},0)},{passive:!0})].filter(Boolean),N=()=>$.forEach(u=>u());return s?{stop:N,cancel:()=>{l=!1},trigger:u=>{l=!0,b(u),l=!1}}:N}const Qe={mounted(o,e){const t=!e.modifiers.bubble;if(typeof e.value=="function")o.__onClickOutside_stop=te(o,e.value,{capture:t});else{const[n,r]=e.value;o.__onClickOutside_stop=te(o,n,Object.assign({capture:t},r))}},unmounted(o){o.__onClickOutside_stop()}};function J(o){return typeof Window<"u"&&o instanceof Window?o.document.documentElement:typeof Document<"u"&&o instanceof Document?o.documentElement:o}function ae(o){const e=window.getComputedStyle(o);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&o.clientWidth<o.scrollWidth||e.overflowY==="auto"&&o.clientHeight<o.scrollHeight)return!0;{const t=o.parentNode;return!t||t.tagName==="BODY"?!1:ae(t)}}function Ze(o){const e=o||window.event,t=e.target;return ae(t)?!1:e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)}const U=new WeakMap;function et(o,e=!1){const t=re(e);let n=null,r="";X(Ge(o),s=>{const l=J(y(s));if(l){const c=l;if(U.get(c)||U.set(c,c.style.overflow),c.style.overflow!=="hidden"&&(r=c.style.overflow),c.style.overflow==="hidden")return t.value=!0;if(t.value)return c.style.overflow="hidden"}},{immediate:!0});const a=()=>{const s=J(y(o));!s||t.value||(Y&&(n=W(s,"touchmove",l=>{Ze(l)},{passive:!1})),s.style.overflow="hidden",t.value=!0)},i=()=>{const s=J(y(o));!s||!t.value||(Y&&(n==null||n()),s.style.overflow=r,U.delete(s),t.value=!1)};return le(i),A({get(){return t.value},set(s){s?a():i()}})}function tt(){let o=!1;const e=re(!1);return(t,n)=>{if(e.value=n.value,o)return;o=!0;const r=et(t,n.value);X(e,a=>r.value=a)}}tt();class P{constructor(){C(this,"children");C(this,"isEndOfWord");C(this,"timestamp");this.children={},this.isEndOfWord=!1,this.timestamp=null}}class H{constructor(){C(this,"root");C(this,"size");this.root=new P,this.size=0}clear(){this.root=new P,this.size=0}insert(e){let t=this.root;for(const n of e)t.children[n]||(t.children[n]=new P),t=t.children[n];t.isEndOfWord||this.size++,t.isEndOfWord=!0,t.timestamp=Date.now()}delete(e){const t=(n,r)=>{if(r===e.length)return n.isEndOfWord?(n.isEndOfWord=!1,this.size--,Object.keys(n.children).length===0):!1;const a=e[r],i=n.children[a];return i&&t(i,r+1)?(delete n.children[a],Object.keys(n.children).length===0):!1};t(this.root,0)}findWords(e){let t=this.root;for(const n of e){if(!t.children[n])return[];t=t.children[n]}return this.collectWords(t,e)}collectWords(e,t){const n=[];e.isEndOfWord&&e.timestamp&&n.push({word:t,timestamp:e.timestamp});for(const r in e.children)n.push(...this.collectWords(e.children[r],t+r));return n}serialize(){function e(t){return{isEndOfWord:t.isEndOfWord,timestamp:t.timestamp,children:Object.fromEntries(Object.entries(t.children).map(([n,r])=>[n,e(r)]))}}return JSON.stringify(e(this.root))}static deserialize(e){const t=new H;function n(r){const a=new P;a.isEndOfWord=r.isEndOfWord,a.timestamp=r.timestamp;for(const[i,s]of Object.entries(r.children))a.children[i]=n(s);return a}return t.root=n(JSON.parse(e)),t}}const ot=["onKeydown"],nt={class:"outline-rosybrown-300 absolute top-full right-0 left-0 rounded-b-md bg-white pt-2 outline"},rt=["onMouseenter"],st=["onClick"],lt={class:"text-rosybrown-600 overflow-hidden text-ellipsis"},it=["onClick"],ut={class:"flex flex-row-reverse items-baseline px-4 py-1"},at=oe({__name:"SearchBar",setup(o){const e=Ee(),t=E(""),n=E([]),r=E(!1),a=E(!1),i=E(-1),s=E(!1),l=()=>{r.value=!1,i.value=-1,s.value=!1};xe(()=>{window.addEventListener("scroll",l)}),Te(()=>{window.removeEventListener("scroll",l)});const h=(f=>{try{return f?H.deserialize(f):new H}catch(v){return console.error("反序列化前缀树时出错:",v),new H}})(localStorage.getItem("searchHistory")),w=()=>{const f=t.value;f&&(r.value=!1,a.value=!1,i.value=-1,s.value=!1,t.value="",e.push({name:"search",query:{q:f}}),queueMicrotask(()=>{try{h.insert(f);const v=h.serialize();localStorage.setItem("searchHistory",v)}catch(v){console.error("存储搜索历史失败:",v)}}))},b=Ye(()=>{r.value=!0;const f=t.value,v=h.findWords(f);if(i.value=-1,s.value=!1,v.length<2){n.value=v.map(S=>S.word);return}v.sort((S,F)=>F.timestamp-S.timestamp),n.value=v.map(S=>S.word).slice(0,10)},100),x=f=>{t.value=n.value[f],w()},$=f=>{h.delete(n.value.splice(f,1)[0]),localStorage.setItem("searchHistory",h.serialize()),f===i.value&&(i.value=-1,s.value=!1)},N=()=>{n.value=[],h.clear(),localStorage.removeItem("searchHistory"),i.value=-1,s.value=!1},u=f=>{f.target.tagName==="INPUT"&&(r.value=!0,a.value=!0)},d=f=>{s.value&&(s.value=!1),!(!r.value||n.value.length===0)&&(f==="down"?i.value=i.value===n.value.length-1?0:i.value+1:i.value=i.value<=0?n.value.length-1:i.value-1,t.value=n.value[i.value],ce())},p=()=>{i.value!==-1&&n.value.length>0?x(i.value):w()},I=f=>{s.value=!0,i.value=f,t.value=n.value[f]},j=()=>{s.value=!1},ce=()=>{const f=document.querySelector(`li:nth-child(${i.value+1})`);f&&f.scrollIntoView({block:"nearest"})},de=A(()=>r.value&&n.value.length>0?["rounded-b-none","rounded-t-[24px]"]:["rounded-[3rem]"]),fe=A(()=>r.value?["backdrop-blur-xs","backdrop-brightness-90"]:["hidden"]);return(f,v)=>{const S=Re,F=Pe;return O(),k("div",null,[m("div",{class:V(["fixed top-0 left-0 z-50 h-screen w-screen",fe.value])},null,2),L((O(),k("form",{class:V(["outline-rosybrown-300 hover:outline-rosybrown-400 relative z-100 flex h-12 flex-row items-center space-x-2 bg-white px-3 outline-2 hover:outline-3",de.value]),onSubmit:T(w,["prevent"]),onClick:u},[z(S,{width:"36",height:"36",class:"text-rosybrown-400 hover:text-rosybrown-700 cursor-pointer pl-1",onClick:T(w,["stop"])}),L(m("input",{class:"text-rosybrown-800 h-full w-full","onUpdate:modelValue":v[0]||(v[0]=g=>t.value=g),onInput:v[1]||(v[1]=(...g)=>q(b)&&q(b)(...g)),onFocus:v[2]||(v[2]=(...g)=>q(b)&&q(b)(...g)),onKeydown:[v[3]||(v[3]=K(T(g=>d("down"),["prevent"]),["down"])),v[4]||(v[4]=K(T(g=>d("up"),["prevent"]),["up"])),K(T(p,["prevent"]),["enter"])]},null,40,ot),[[ke,t.value,void 0,{trim:!0}]]),L(m("ul",nt,[(O(!0),k(Oe,null,Se(n.value,(g,M)=>(O(),k("li",{key:M,class:V(["hover:text-rosybrown-700 box-border flex flex-row items-center justify-between border-l-3 px-4 py-1 transition-colors duration-150",[M===i.value?"border-l-rosybrown-700 bg-rosybrown-50 text-rosybrown-700":"border-l-transparent"]]),onMouseenter:Q=>I(M),onMouseleave:j},[m("div",{class:"flex w-7/8 cursor-pointer flex-row items-center font-sans",onClick:T(Q=>x(M),["stop"])},[z(F,{class:"text-rosybrown-400 pr-4",style:{width:"40px"}}),m("div",lt,Ce(g),1)],8,st),m("div",{class:"text-rosybrown-300 hover:text-rosybrown-500 cursor-pointer text-sm hover:underline",onClick:T(Q=>$(M),["stop"])}," 删除 ",8,it)],42,rt))),128)),L(m("li",ut,[m("div",{class:"text-rosybrown-300 hover:text-rosybrown-500 cursor-pointer text-xs",onClick:T(N,["stop"])}," 清空历史 ")],512),[[Z,r.value&&n.value.length>0]])],512),[[Z,r.value&&n.value.length>0]])],34)),[[q(Qe),()=>{r.value=!1,i.value=-1}]])])}}}),ht=se(at,[["__scopeId","data-v-879b720a"]]);export{vt as N,ht as S,se as _,ft as a};
