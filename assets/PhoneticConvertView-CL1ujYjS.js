import{m as S,c as p,f as u,g as s,a as L,b,z,t as w,s as A,w as te,v as ne,i as j,h as _,D as F,H as q,e as B,F as V,x as se,y as O,I as ae}from"./index-CKiCN28Z.js";import{b as le,c as P,d as E,e as H,f as oe,y as re,g as D,_ as ie}from"./RubyText-Dj0qyQ9X.js";import{_ as ce}from"./PageContent.vue_vue_type_script_setup_true_lang-DjyeHxzt.js";import{_ as ue}from"./ToastTip.vue_vue_type_script_setup_true_lang-BHcf2TQl.js";import"./SearchBar-B6oRdf3s.js";const pe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function de(f,c){return u(),p("svg",pe,c[0]||(c[0]=[s("path",{fill:"currentColor",d:"M9 18q-.825 0-1.412-.587T7 16V4q0-.825.588-1.412T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.587 1.413T18 18zm-4 4q-.825 0-1.412-.587T3 20V6h2v14h11v2z"},null,-1)]))}const he=S({name:"material-symbols-content-copy",render:de}),ge={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function me(f,c){return u(),p("svg",ge,c[0]||(c[0]=[s("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zm2-4h2V8H9zm4 0h2V8h-2z"},null,-1)]))}const fe=S({name:"material-symbols-delete",render:me}),ve={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ye(f,c){return u(),p("svg",ve,c[0]||(c[0]=[s("path",{fill:"currentColor",d:"M14.293 2.293a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414l-4 4a1 1 0 0 1-1.414-1.414L16.586 8H5a1 1 0 0 1 0-2h11.586l-2.293-2.293a1 1 0 0 1 0-1.414m-4.586 10a1 1 0 0 1 0 1.414L7.414 16H19a1 1 0 1 1 0 2H7.414l2.293 2.293a1 1 0 0 1-1.414 1.414l-4-4a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0"},null,-1)]))}const xe=S({name:"mi-switch",render:ye}),_e={class:"relative"},we=L({__name:"TextareaCard",props:{placeholder:{type:String,default:"placeholder"},inputAreaClass:{type:[String,Object,Array],default:""},placeholderClass:{type:[String,Object,Array],default:""}},setup(f,{expose:c}){const T=f,g=b(null),d=b(""),v=()=>{var x;if(!g.value)return;let m=((x=g.value.textContent)==null?void 0:x.trim())||"";d.value=m},y=()=>{v()},C=m=>{(["Backspace","Delete"].includes(m.key)||m.ctrlKey&&m.key==="a")&&setTimeout(v,0)};return c({data:()=>d.value,clear:()=>{g.value&&(g.value.textContent="",d.value="")}}),(m,x)=>(u(),p("div",_e,[s("div",{contenteditable:"true",ref_key:"inputArea",ref:g,class:z(["bg-transparent outline-none",f.inputAreaClass]),onInput:y,onKeyup:C,onBlur:y,onCut:y},null,34),s("span",{class:z(["pointer-events-none absolute left-0 top-0 inline",{invisible:d.value.length>0},f.placeholderClass]),style:{"line-height":"inherit"}},w(T.placeholder),3)]))}}),be={class:"mb-5 flex flex-row text-4xl font-bold text-rosybrown-800"},Te={class:"relative mb-16 mt-5 space-y-5 rounded-lg bg-white"},Ce={class:"absolute flex w-full items-center justify-between gap-1 px-6 pt-5"},ke=["value"],$e={class:"mx-2 rounded-full bg-white text-rosybrown-700 ring-8 ring-wheat-50"},Me=["value"],Ae={class:"flex w-full flex-col lg:flex-row"},Ve={class:"my-3 ml-3 mr-3 flex flex-1 flex-col rounded-xl bg-wheat-50 pt-16 lg:mr-0"},ze={class:"bg-red mt-auto px-6 py-3"},Ie={class:"my-3 ml-3 mr-3 flex flex-1 flex-col rounded-xl bg-white lg:pl-0 lg:pt-16"},Be=["tabindex","data-tooltip-target"],Pe=["id"],Se={key:1,class:"select-none text-3xl font-bold text-wheat-600/50"},je={class:"mt-auto px-6 py-3"},De=L({__name:"PhoneticConvertView",setup(f){const c=[{label:"榕拼键入",value:"typing"},{label:"榕拼手写",value:"cursive"},{label:"国际音标",value:"ipa"}],T={typing:"huk21 ziu53 ua242",cursive:"hǔk zìu uâ",ipa:"huʔ˨˩ t͡siu˥˧ ua˨˦˨"},g=/\d+$/,d=b("typing"),v=b("cursive"),y=b(null),C=b(null),h=A(()=>{var t,e;return((e=(t=y.value)==null?void 0:t.data)==null?void 0:e.call(t))||""}),m=Object.entries(le).reduce((t,[e,a])=>(t[a]||(t[a]=e),t),{}),x=Object.entries(P).map(([t,e])=>({typing:t,ipa:e})).sort((t,e)=>e.ipa.length-t.ipa.length),I={};Object.entries(E).forEach(([t,e])=>{I[e]||(I[e]=t)});const R=Object.entries(H).map(([t,e])=>({tone:t,ipa:e})).sort((t,e)=>e.ipa.length-t.ipa.length),N=t=>{var e;return(e=t.match(/\s+|\S+/g))!=null?e:[]},K=A(()=>h.value?{tokens:N(h.value).map(a=>/^\s+$/.test(a)?{text:a,raw:a,type:"whitespace"}:W(a,d.value,v.value))}:{tokens:[]}),k=A(()=>K.value.tokens),U=A(()=>k.value.some(t=>t.type!=="whitespace"));function W(t,e,a){const r=t.trim();if(!r)return{text:t,raw:t,type:"whitespace"};const l=G(r,e);return l.success?{text:Y(l.value,a),raw:t,type:"normal"}:{text:t,raw:t,type:"error",message:l.message}}function Y(t,e){return e==="typing"?t:e==="cursive"?oe(t):re(t)}function G(t,e){return e==="typing"?J(t):e==="cursive"?Q(t):X(t)}function J(t){const e=t.toLowerCase(),a=e.match(g);if(!a)return{success:!1,message:"缺少声调数字"};const r=a[0],l=e.slice(0,e.length-r.length);if(!l)return{success:!1,message:"缺少韵母部分"};const i=l.match(D);let n=i?i[0]:"",o=l.slice(n.length);return n==="ng"&&!o&&(n="",o="ng"),n in P?!o||!(o in E)?{success:!1,message:"韵母不合法"}:r in H?{success:!0,value:"".concat(n).concat(o).concat(r)}:{success:!1,message:"声调不合法"}:{success:!1,message:"声母不合法"}}function Q(t){const e=t.toLowerCase(),a=e.match(D);let r=a?a[0]:"",l=e.slice(r.length);if(r==="ng"&&!l&&(r="",l="ng"),!l)return{success:!1,message:"缺少韵母部分"};const i=m[l];if(!i)return{success:!1,message:"未识别的手写韵母"};const n=i.match(g);if(!n)return{success:!1,message:"未识别声调"};const o=n[0],$=i.slice(0,i.length-o.length);return r in P?{success:!0,value:"".concat(r).concat($).concat(o)}:{success:!1,message:"声母不合法"}}function X(t){const e=t.replace(/\//g,"").trim();if(!e)return{success:!1,message:"音节为空"};const a=R.find(M=>e.endsWith(M.ipa));if(!a)return{success:!1,message:"未识别的声调"};const r=a.tone;let l=e.slice(0,e.length-a.ipa.length),i="",n=l;const o=x.find(M=>M.ipa&&l.startsWith(M.ipa));o&&(i=o.typing,n=l.slice(o.ipa.length)),!o&&n===l&&(i="");const $=I[n];return $?{success:!0,value:"".concat(i).concat($).concat(r)}:{success:!1,message:"未识别的韵母"}}const Z=()=>{var t;(t=y.value)==null||t.clear()},ee=async()=>{var e;const t=k.value.map(a=>a.text).join("");if(t)try{await navigator.clipboard.writeText(t),(e=C.value)==null||e.tip()}catch(a){console.error("复制失败:",a)}};return te(()=>k.value,()=>{setTimeout(()=>{ae()},0)},{deep:!0}),(t,e)=>{const a=ie,r=xe,l=fe,i=he;return u(),ne(ce,{"show-search-bar":!1},{default:j(()=>[s("div",null,[s("div",be,[_(a,{text:"工具",yngping:"geoyng55 geoy242"})]),e[2]||(e[2]=s("div",{class:"space-y-2 text-sm font-semibold text-rosybrown-600"},[s("p",null," 在榕拼键入、榕拼手写与国际音标之间实时转换，逐个音节校验并提示错误，帮助你快速完成不同注音方案之间的互换。 ")],-1))]),s("div",Te,[s("div",Ce,[F(s("select",{"onUpdate:modelValue":e[0]||(e[0]=n=>d.value=n),class:"w-full rounded-lg border border-wheat-200 bg-wheat-50/50 px-3 py-1.5 font-plain text-sm text-rosybrown-700 ring-wheat-200 transition hover:border-wheat-400"},[(u(),p(V,null,B(c,n=>s("option",{key:n.value,value:n.value},w(n.label),9,ke)),64))],512),[[q,d.value]]),s("div",$e,[_(r,{class:"m-2"})]),F(s("select",{"onUpdate:modelValue":e[1]||(e[1]=n=>v.value=n),class:"w-full rounded-lg border border-wheat-200 bg-wheat-50/50 px-3 py-1.5 font-plain text-sm text-rosybrown-700 ring-wheat-200 transition hover:border-wheat-400"},[(u(),p(V,null,B(c,n=>s("option",{key:n.value,value:n.value},w(n.label),9,Me)),64))],512),[[q,v.value]])]),s("div",Ae,[s("div",Ve,[_(we,{ref_key:"inputArea",ref:y,placeholder:T[d.value],"placeholder-class":"px-6 text-3xl font-bold text-wheat-600/50 leading-relaxed","input-area-class":{"h-full min-h-[10rem] w-full break-all px-6 leading-relaxed text-rosybrown-800 lg:min-h-[20rem]":!0,"text-3xl font-bold":h.value.length<120,"text-xl font-bold":h.value.length>=120&&h.value.length<280}},null,8,["placeholder","input-area-class"]),s("div",ze,[s("button",{onClick:Z,class:"rounded-lg bg-wheat-100 p-1.5 text-wheat-500 duration-300 hover:bg-wheat-200 active:bg-wheat-200"},[_(l)])])]),s("div",Ie,[s("div",{class:z(["h-full min-h-[10rem] w-full break-all px-6 leading-relaxed text-rosybrown-800 lg:min-h-[20rem]",{"text-3xl font-bold":h.value.length<120,"text-xl font-bold":h.value.length>=120&&h.value.length<280}])},[U.value?(u(!0),p(V,{key:0},B(k.value,(n,o)=>(u(),p(V,{key:o},[s("span",{tabindex:n.type==="error"&&n.message?0:void 0,"data-tooltip-target":n.type==="error"&&n.message?"tooltip-".concat(o):void 0,class:z(["inline text-rosybrown-800",{"cursor-pointer rounded-md bg-rose-50 px-1 ring-1 ring-rose-100":n.type==="error","whitespace-pre-wrap":n.type==="whitespace"}])},w(n.text),11,Be),n.type==="error"&&n.message?(u(),p("div",{key:0,id:"tooltip-".concat(o),role:"tooltip",class:"tooltip invisible absolute z-50 inline-block rounded-xl bg-rosybrown-900 px-3 py-2 text-sm text-wheat-50 opacity-0 transition-opacity duration-500"},[O(w(n.message)+" ",1),e[3]||(e[3]=s("div",{class:"tooltip-arrow","data-popper-arrow":""},null,-1))],8,Pe)):se("",!0)],64))),128)):(u(),p("span",Se,w(T[v.value]),1))],2),s("div",je,[s("button",{onClick:ee,class:"rounded-lg bg-wheat-100 p-1.5 text-wheat-500 duration-300 hover:bg-wheat-200 active:bg-wheat-200"},[_(i)])]),_(ue,{ref_key:"copyTip",ref:C},{default:j(()=>e[4]||(e[4]=[O("已复制结果")])),_:1},512)])])])]),_:1})}}});export{De as default};
