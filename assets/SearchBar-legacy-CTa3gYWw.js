!function(){function e(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register(["./index-legacy-Bl3xgERv.js"],function(t,n){"use strict";var o,r,l,s,i,a,u,c,d,v,h,f,m,p,w,b,y,g,x,T,O,E,k,q,_,j,S,W,C,P;return{setters:[e=>{o=e.a,r=e.c,l=e.g,s=e.x,i=e.f,a=e.h,u=e.i,c=e.j,d=e.y,v=e.m,h=e.w,f=e.H,m=e.I,p=e.J,e.K,e.L,w=e.b,e.M,b=e.s,y=e.u,g=e.N,x=e.o,T=e.l,O=e.D,E=e.z,k=e.C,q=e.O,_=e.P,j=e.F,S=e.e,W=e.E,C=e.k,P=e.t}],execute:function(){var n=document.createElement("style");n.textContent="input[data-v-21db8f31]{border:none;outline:none}\n/*$vite$:1*/",document.head.appendChild(n);const z={class:"bg-wheat-50"},A={class:"bg-rosybrown-800 h-56 rounded-t-[48px] text-center"},I={class:"flex flex-col pt-20"},M=(t("a",o({__name:"Footer",setup:e=>(e,t)=>(i(),r("div",z,[l("div",A,[l("div",I,[t[1]||(t[1]=l("span",{class:"text-sans text-rosybrown-50 mb-2"},"© 2025 米时典 SeeDict ",-1)),s("",!0)])])]))})),t("_",(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n})),N={class:"flex h-full flex-row justify-between rounded-lg bg-white"},H={class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"},$={class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"},F={class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"};t("N",M({},[["render",function(e,t){const n=c("RouterLink");return i(),r("div",N,[l("div",H,[a(n,{to:{name:"home"}},{default:u(()=>t[0]||(t[0]=[d("主页")])),_:1})]),l("div",$,[a(n,{to:{name:"tutorial"}},{default:u(()=>t[1]||(t[1]=[d("入门")])),_:1})]),t[3]||(t[3]=l("div",{class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"},[l("a",{href:"https://jcnf40n3hvft.feishu.cn/docx/FSqidtsgjo25x0x6R1KcChopnTc",target:"_blank"},"帮助")],-1)),l("div",F,[a(n,{to:{name:"about"}},{default:u(()=>t[2]||(t[2]=[d("关于")])),_:1})])])}]]));const L={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};const B=v({name:"material-symbols-history-rounded",render:function(e,t){return i(),r("svg",L,t[0]||(t[0]=[l("path",{fill:"currentColor",d:"M12 21q-3.15 0-5.575-1.912T3.275 14.2q-.1-.375.15-.687t.675-.363q.4-.05.725.15t.45.6q.6 2.25 2.475 3.675T12 19q2.925 0 4.963-2.037T19 12t-2.037-4.962T12 5q-1.725 0-3.225.8T6.25 8H8q.425 0 .713.288T9 9t-.288.713T8 10H4q-.425 0-.712-.288T3 9V5q0-.425.288-.712T4 4t.713.288T5 5v1.35q1.275-1.6 3.113-2.475T12 3q1.875 0 3.513.713t2.85 1.924t1.925 2.85T21 12t-.712 3.513t-1.925 2.85t-2.85 1.925T12 21m1-9.4l2.5 2.5q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-2.8-2.8q-.15-.15-.225-.337T11 11.975V8q0-.425.288-.712T12 7t.713.288T13 8z"},null,-1)]))}}),K={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};const V=v({name:"material-symbols-search-rounded",render:function(e,t){return i(),r("svg",K,t[0]||(t[0]=[l("path",{fill:"currentColor",d:"M9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l5.6 5.6q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-5.6-5.6q-.75.6-1.725.95T9.5 16m0-2q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14"},null,-1)]))}});function D(e){return!!f()&&(m(e),!0)}const J="undefined"!=typeof window&&"undefined"!=typeof document;"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const R=Object.prototype.toString,G=()=>{},U=Q();function Q(){var e,t;return J&&(null==(e=null==window?void 0:window.navigator)?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||(null==(t=null==window?void 0:window.navigator)?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(null==window?void 0:window.navigator.userAgent))}function X(e){return Array.isArray(e)?e:[e]}function Y(e,t=200,n={}){return function(e,t){return function(...n){return new Promise((o,r)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(o).catch(r)})}}(function(e,t={}){let n,o,r=G;const l=e=>{clearTimeout(e),r(),r=G};let s;return i=>{const a=p(e),u=p(t.maxWait);return n&&l(n),a<=0||void 0!==u&&u<=0?(o&&(l(o),o=null),Promise.resolve(i())):new Promise((e,c)=>{r=t.rejectOnCancel?c:e,s=i,u&&!o&&(o=setTimeout(()=>{n&&l(n),o=null,e(s())},u)),n=setTimeout(()=>{o&&l(o),o=null,e(i())},a)})}}(t,n),e)}const Z=J?window:void 0;function ee(e){var t;const n=p(e);return null!=(t=null==n?void 0:n.$el)?t:n}function te(...e){const t=[],n=()=>{t.forEach(e=>e()),t.length=0},o=b(()=>{const t=X(p(e[0])).filter(e=>null!=e);return t.every(e=>"string"!=typeof e)?t:void 0}),r=(l=([e,o,r,l])=>{if(n(),!(null==e?void 0:e.length)||!(null==o?void 0:o.length)||!(null==r?void 0:r.length))return;const s=(i=l,"[object Object]"===R.call(i)?{...l}:l);var i;t.push(...e.flatMap(e=>o.flatMap(t=>r.map(n=>((e,t,n,o)=>(e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)))(e,t,n,s)))))},s={flush:"post"},h(()=>{var t,n;return[null!=(n=null==(t=o.value)?void 0:t.map(e=>ee(e)))?n:[Z].filter(e=>null!=e),X(p(o.value?e[1]:e[0])),X(y(o.value?e[2]:e[1])),p(o.value?e[3]:e[2])]},l,{...s,immediate:!0}));var l,s;return D(n),()=>{r(),n()}}let ne=!1;function oe(e,t,n={}){const{window:o=Z,ignore:r=[],capture:l=!0,detectIframe:s=!1,controls:i=!1}=n;if(!o)return i?{stop:G,cancel:G,trigger:G}:G;if(U&&!ne){ne=!0;const e={passive:!0};Array.from(o.document.body.children).forEach(t=>te(t,"click",G,e)),te(o.document.documentElement,"click",G,e)}let a=!0;const u=e=>p(r).some(t=>{if("string"==typeof t)return Array.from(o.document.querySelectorAll(t)).some(t=>t===e.target||e.composedPath().includes(t));{const n=ee(t);return n&&(e.target===n||e.composedPath().includes(n))}});const c=n=>{const o=ee(e);null!=n.target&&(o instanceof Element||!function(e){const t=p(e);return t&&16===t.$.subTree.shapeFlag}(e)||!function(e,t){const n=p(e),o=n.$.subTree&&n.$.subTree.children;return!(null==o||!Array.isArray(o))&&o.some(e=>e.el===t.target||t.composedPath().includes(e.el))}(e,n))&&o&&o!==n.target&&!n.composedPath().includes(o)&&("detail"in n&&0===n.detail&&(a=!u(n)),a?t(n):a=!0)};let d=!1;const v=[te(o,"click",e=>{d||(d=!0,setTimeout(()=>{d=!1},0),c(e))},{passive:!0,capture:l}),te(o,"pointerdown",t=>{const n=ee(e);a=!u(t)&&!(!n||t.composedPath().includes(n))},{passive:!0}),s&&te(o,"blur",n=>{setTimeout(()=>{var r;const l=ee(e);"IFRAME"!==(null==(r=o.document.activeElement)?void 0:r.tagName)||(null==l?void 0:l.contains(o.document.activeElement))||t(n)},0)},{passive:!0})].filter(Boolean),h=()=>v.forEach(e=>e());return i?{stop:h,cancel:()=>{a=!1},trigger:e=>{a=!0,c(e),a=!1}}:h}const re={mounted(e,t){const n=!t.modifiers.bubble;if("function"==typeof t.value)e.__onClickOutside_stop=oe(e,t.value,{capture:n});else{const[o,r]=t.value;e.__onClickOutside_stop=oe(e,o,Object.assign({capture:n},r))}},unmounted(e){e.__onClickOutside_stop()}};!function(){let e=!1;const t=g(!1)}();class le{constructor(){e(this,"children",void 0),e(this,"isEndOfWord",void 0),e(this,"timestamp",void 0),this.children={},this.isEndOfWord=!1,this.timestamp=null}}class se{constructor(){e(this,"root",void 0),e(this,"size",void 0),this.root=new le,this.size=0}clear(){this.root=new le,this.size=0}insert(e){let t=this.root;for(const n of e)t.children[n]||(t.children[n]=new le),t=t.children[n];t.isEndOfWord||this.size++,t.isEndOfWord=!0,t.timestamp=Date.now()}delete(e){const t=(n,o)=>{if(o===e.length)return!!n.isEndOfWord&&(n.isEndOfWord=!1,this.size--,0===Object.keys(n.children).length);const r=e[o],l=n.children[r];if(!l)return!1;return!!t(l,o+1)&&(delete n.children[r],0===Object.keys(n.children).length)};t(this.root,0)}findWords(e){let t=this.root;for(const n of e){if(!t.children[n])return[];t=t.children[n]}return this.collectWords(t,e)}collectWords(e,t){const n=[];e.isEndOfWord&&e.timestamp&&n.push({word:t,timestamp:e.timestamp});for(const o in e.children)n.push(...this.collectWords(e.children[o],t+o));return n}serialize(){return JSON.stringify(function e(t){return{isEndOfWord:t.isEndOfWord,timestamp:t.timestamp,children:Object.fromEntries(Object.entries(t.children).map(([t,n])=>[t,e(n)]))}}(this.root))}static deserialize(e){const t=new se;return t.root=function e(t){const n=new le;n.isEndOfWord=t.isEndOfWord,n.timestamp=t.timestamp;for(const[o,r]of Object.entries(t.children))n.children[o]=e(r);return n}(JSON.parse(e)),t}}const ie=["onKeydown"],ae={class:"outline-rosybrown-300 absolute top-full right-0 left-0 rounded-b-md bg-white pt-2 outline outline-1"},ue=["onMouseenter"],ce=["onClick"],de={class:"text-rosybrown-600 overflow-hidden text-ellipsis"},ve=["onClick"],he={class:"flex flex-row-reverse items-baseline px-4 py-1"};t("S",M(o({__name:"SearchBar",setup(e){const t=C(),n=w(""),o=w([]),s=w(!1),u=w(!1),c=w(-1),d=w(!1),v=()=>{s.value=!1,c.value=-1,d.value=!1};x(()=>{window.addEventListener("scroll",v)}),T(()=>{window.removeEventListener("scroll",v)});const h=(e=>{try{return e?se.deserialize(e):new se}catch(t){return console.error("反序列化前缀树时出错:",t),new se}})(localStorage.getItem("searchHistory")),f=()=>{const e=n.value;e&&(s.value=!1,u.value=!1,c.value=-1,d.value=!1,n.value="",t.push({name:"search",query:{q:e}}),queueMicrotask(()=>{try{h.insert(e);const t=h.serialize();localStorage.setItem("searchHistory",t)}catch(t){console.error("存储搜索历史失败:",t)}}))},m=Y(()=>{s.value=!0;const e=n.value,t=h.findWords(e);c.value=-1,d.value=!1,t.length<2?o.value=t.map(e=>e.word):(t.sort((e,t)=>t.timestamp-e.timestamp),o.value=t.map(e=>e.word).slice(0,10))},100),p=e=>{n.value=o.value[e],f()},g=()=>{o.value=[],h.clear(),localStorage.removeItem("searchHistory"),c.value=-1,d.value=!1},z=e=>{"INPUT"===e.target.tagName&&(s.value=!0,u.value=!0)},A=e=>{d.value&&(d.value=!1),s.value&&0!==o.value.length&&(c.value="down"===e?c.value===o.value.length-1?0:c.value+1:c.value<=0?o.value.length-1:c.value-1,n.value=o.value[c.value],N())},I=()=>{-1!==c.value&&o.value.length>0?p(c.value):f()},M=()=>{d.value=!1},N=()=>{const e=document.querySelector(`li:nth-child(${c.value+1})`);e&&e.scrollIntoView({block:"nearest"})},H=b(()=>s.value&&o.value.length>0?["rounded-b-none","rounded-t-[24px]"]:["rounded-[3rem]"]),$=b(()=>s.value?["backdrop-blur-xs","backdrop-brightness-90"]:["hidden"]);return(e,t)=>{const u=V,v=B;return i(),r("div",null,[l("div",{class:E(["fixed top-0 left-0 z-20 h-screen w-screen",$.value])},null,2),O((i(),r("form",{class:E(["outline-rosybrown-300 hover:outline-rosybrown-400 outline relative z-40 flex h-12 flex-row items-center bg-white px-3 outline-2 hover:outline-[3px]",H.value]),onSubmit:k(f,["prevent"]),onClick:z},[a(u,{width:"36",height:"36",class:"text-rosybrown-400 hover:text-rosybrown-700 cursor-pointer pl-1 mr-2",onClick:k(f,["stop"])}),O(l("input",{class:"text-rosybrown-800 h-full w-full mr-2","onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),onInput:t[1]||(t[1]=(...e)=>y(m)&&y(m)(...e)),onFocus:t[2]||(t[2]=(...e)=>y(m)&&y(m)(...e)),onKeydown:[t[3]||(t[3]=q(k(e=>A("down"),["prevent"]),["down"])),t[4]||(t[4]=q(k(e=>A("up"),["prevent"]),["up"])),q(k(I,["prevent"]),["enter"])]},null,40,ie),[[_,n.value,void 0,{trim:!0}]]),O(l("ul",ae,[(i(!0),r(j,null,S(o.value,(e,t)=>(i(),r("li",{key:t,class:E(["hover:text-rosybrown-700 box-border flex flex-row items-center justify-between border-l-4 px-4 py-1 transition-colors duration-150",[t===c.value?"border-l-rosybrown-700 bg-rosybrown-50 text-rosybrown-700":"border-l-transparent"]]),onMouseenter:e=>(e=>{d.value=!0,c.value=e,n.value=o.value[e]})(t),onMouseleave:M},[l("div",{class:"flex w-5/6 cursor-pointer flex-row items-center font-sans",onClick:k(e=>p(t),["stop"])},[a(v,{class:"text-rosybrown-400 pr-4",style:{width:"40px"}}),l("div",de,P(e),1)],8,ce),l("div",{class:"text-rosybrown-300 hover:text-rosybrown-500 cursor-pointer text-sm hover:underline",onClick:k(e=>(e=>{h.delete(o.value.splice(e,1)[0]),localStorage.setItem("searchHistory",h.serialize()),e===c.value&&(c.value=-1,d.value=!1)})(t),["stop"])}," 删除 ",8,ve)],42,ue))),128)),O(l("li",he,[l("div",{class:"text-rosybrown-300 hover:text-rosybrown-500 cursor-pointer text-xs",onClick:k(g,["stop"])}," 清空历史 ")],512),[[W,s.value&&o.value.length>0]])],512),[[W,s.value&&o.value.length>0]])],34)),[[y(re),()=>{s.value=!1,c.value=-1}]])])}}}),[["__scopeId","data-v-21db8f31"]]))}}})}();
