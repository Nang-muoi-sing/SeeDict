var ve=Object.defineProperty;var he=(o,e,t)=>e in o?ve(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var E=(o,e,t)=>he(o,typeof e!="symbol"?e+"":e,t);import{b as g,f as x,g as v,h as H,w as R,i as me,s as B,m as te,l as Y,E as pe,G as we,H as ye,I as be,r as O,J as _e,c as A,K as w,v as oe,L as ne,d as re,o as ge,j as xe,A as L,x as F,M as _,N as V,O as Te,F as ke,e as Oe,B as Q,C as Se,t as Ee,q as Ce}from"./index-GJJyMBej.js";const se=(o,e)=>{const t=o.__vccOpts||o;for(const[n,s]of e)t[n]=s;return t},qe={},We={class:"flex h-full flex-row justify-between rounded-lg bg-white"},$e={class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"},Ie={class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"},Me={class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"};function He(o,e){const t=me("RouterLink");return x(),g("div",We,[v("div",$e,[H(t,{to:{name:"home"}},{default:R(()=>e[0]||(e[0]=[B("主页")])),_:1})]),v("div",Ie,[H(t,{to:{name:"tutorial"}},{default:R(()=>e[1]||(e[1]=[B("入门")])),_:1})]),e[3]||(e[3]=v("div",{class:"hover:bg-wheat-50 text-rosybrown-600 hover:text-rosybrown-800 m-1 content-center rounded-xs px-3 py-1.5 font-bold transition-all ease-in-out"},[v("a",{href:"https://jcnf40n3hvft.feishu.cn/docx/FSqidtsgjo25x0x6R1KcChopnTc",target:"_blank"},"帮助")],-1)),v("div",Me,[H(t,{to:{name:"about"}},{default:R(()=>e[2]||(e[2]=[B("关于")])),_:1})])])}const ut=se(qe,[["render",He]]),ze={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function De(o,e){return x(),g("svg",ze,e[0]||(e[0]=[v("path",{fill:"currentColor",d:"M12 21q-3.15 0-5.575-1.912T3.275 14.2q-.1-.375.15-.687t.675-.363q.4-.05.725.15t.45.6q.6 2.25 2.475 3.675T12 19q2.925 0 4.963-2.037T19 12t-2.037-4.962T12 5q-1.725 0-3.225.8T6.25 8H8q.425 0 .713.288T9 9t-.288.713T8 10H4q-.425 0-.712-.288T3 9V5q0-.425.288-.712T4 4t.713.288T5 5v1.35q1.275-1.6 3.113-2.475T12 3q1.875 0 3.513.713t2.85 1.924t1.925 2.85T21 12t-.712 3.513t-1.925 2.85t-2.85 1.925T12 21m1-9.4l2.5 2.5q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-2.8-2.8q-.15-.15-.225-.337T11 11.975V8q0-.425.288-.712T12 7t.713.288T13 8z"},null,-1)]))}const Ne=te({name:"material-symbols-history-rounded",render:De}),Le={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function je(o,e){return x(),g("svg",Le,e[0]||(e[0]=[v("path",{fill:"currentColor",d:"M9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l5.6 5.6q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-5.6-5.6q-.75.6-1.725.95T9.5 16m0-2q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14"},null,-1)]))}const Ae=te({name:"material-symbols-search-rounded",render:je});function le(o){return pe()?(we(o),!0):!1}const ie=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Pe=Object.prototype.toString,Re=o=>Pe.call(o)==="[object Object]",S=()=>{},U=Be();function Be(){var o,e;return ie&&((o=window==null?void 0:window.navigator)==null?void 0:o.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Fe(...o){if(o.length!==1)return ye(...o);const e=o[0];return typeof e=="function"?be(_e(()=>({get:e,set:S}))):O(e)}function K(o){return Array.isArray(o)?o:[o]}function Ve(o,e,t){return Y(o,e,{...t,immediate:!0})}const ae=ie?window:void 0;function M(o){var e;const t=w(o);return(e=t==null?void 0:t.$el)!=null?e:t}function C(...o){const e=[],t=()=>{e.forEach(r=>r()),e.length=0},n=(r,a,d,h)=>(r.addEventListener(a,d,h),()=>r.removeEventListener(a,d,h)),s=A(()=>{const r=K(w(o[0])).filter(a=>a!=null);return r.every(a=>typeof a!="string")?r:void 0}),f=Ve(()=>{var r,a;return[(a=(r=s.value)==null?void 0:r.map(d=>M(d)))!=null?a:[ae].filter(d=>d!=null),K(w(s.value?o[1]:o[0])),K(oe(s.value?o[2]:o[1])),w(s.value?o[3]:o[2])]},([r,a,d,h])=>{if(t(),!(r!=null&&r.length)||!(a!=null&&a.length)||!(d!=null&&d.length))return;const y=Re(h)?{...h}:h;e.push(...r.flatMap(T=>a.flatMap(b=>d.map(q=>n(T,b,q,y)))))},{flush:"post"}),i=()=>{f(),t()};return le(t),i}let Z=!1;function ee(o,e,t={}){const{window:n=ae,ignore:s=[],capture:f=!0,detectIframe:i=!1,controls:r=!1}=t;if(!n)return r?{stop:S,cancel:S,trigger:S}:S;if(U&&!Z){Z=!0;const l={passive:!0};Array.from(n.document.body.children).forEach(u=>C(u,"click",S,l)),C(n.document.documentElement,"click",S,l)}let a=!0;const d=l=>w(s).some(u=>{if(typeof u=="string")return Array.from(n.document.querySelectorAll(u)).some(m=>m===l.target||l.composedPath().includes(m));{const m=M(u);return m&&(l.target===m||l.composedPath().includes(m))}});function h(l){const u=w(l);return u&&u.$.subTree.shapeFlag===16}function y(l,u){const m=w(l),W=m.$.subTree&&m.$.subTree.children;return W==null||!Array.isArray(W)?!1:W.some(N=>N.el===u.target||u.composedPath().includes(N.el))}const T=l=>{const u=M(o);if(l.target!=null&&!(!(u instanceof Element)&&h(o)&&y(o,l))&&!(!u||u===l.target||l.composedPath().includes(u))){if("detail"in l&&l.detail===0&&(a=!d(l)),!a){a=!0;return}e(l)}};let b=!1;const q=[C(n,"click",l=>{b||(b=!0,setTimeout(()=>{b=!1},0),T(l))},{passive:!0,capture:f}),C(n,"pointerdown",l=>{const u=M(o);a=!d(l)&&!!(u&&!l.composedPath().includes(u))},{passive:!0}),i&&C(n,"blur",l=>{setTimeout(()=>{var u;const m=M(o);((u=n.document.activeElement)==null?void 0:u.tagName)==="IFRAME"&&!(m!=null&&m.contains(n.document.activeElement))&&e(l)},0)},{passive:!0})].filter(Boolean),D=()=>q.forEach(l=>l());return r?{stop:D,cancel:()=>{a=!1},trigger:l=>{a=!0,T(l),a=!1}}:D}const Ke={mounted(o,e){const t=!e.modifiers.bubble;if(typeof e.value=="function")o.__onClickOutside_stop=ee(o,e.value,{capture:t});else{const[n,s]=e.value;o.__onClickOutside_stop=ee(o,n,Object.assign({capture:t},s))}},unmounted(o){o.__onClickOutside_stop()}};function G(o){return typeof Window<"u"&&o instanceof Window?o.document.documentElement:typeof Document<"u"&&o instanceof Document?o.documentElement:o}function ue(o){const e=window.getComputedStyle(o);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&o.clientWidth<o.scrollWidth||e.overflowY==="auto"&&o.clientHeight<o.scrollHeight)return!0;{const t=o.parentNode;return!t||t.tagName==="BODY"?!1:ue(t)}}function Ge(o){const e=o||window.event,t=e.target;return ue(t)?!1:e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)}const J=new WeakMap;function Je(o,e=!1){const t=ne(e);let n=null,s="";Y(Fe(o),r=>{const a=G(w(r));if(a){const d=a;if(J.get(d)||J.set(d,d.style.overflow),d.style.overflow!=="hidden"&&(s=d.style.overflow),d.style.overflow==="hidden")return t.value=!0;if(t.value)return d.style.overflow="hidden"}},{immediate:!0});const f=()=>{const r=G(w(o));!r||t.value||(U&&(n=C(r,"touchmove",a=>{Ge(a)},{passive:!1})),r.style.overflow="hidden",t.value=!0)},i=()=>{const r=G(w(o));!r||!t.value||(U&&(n==null||n()),r.style.overflow=s,J.delete(r),t.value=!1)};return le(i),A({get(){return t.value},set(r){r?f():i()}})}function Ue(){let o=!1;const e=ne(!1);return(t,n)=>{if(e.value=n.value,o)return;o=!0;const s=Je(t,n.value);Y(e,f=>s.value=f)}}Ue();class j{constructor(){E(this,"children");E(this,"isEndOfWord");E(this,"timestamp");this.children={},this.isEndOfWord=!1,this.timestamp=null}}class z{constructor(){E(this,"root");E(this,"size");this.root=new j,this.size=0}clear(){this.root=new j,this.size=0}insert(e){let t=this.root;for(const n of e)t.children[n]||(t.children[n]=new j),t=t.children[n];t.isEndOfWord||this.size++,t.isEndOfWord=!0,t.timestamp=Date.now()}delete(e){const t=(n,s)=>{if(s===e.length)return n.isEndOfWord?(n.isEndOfWord=!1,this.size--,Object.keys(n.children).length===0):!1;const f=e[s],i=n.children[f];return i&&t(i,s+1)?(delete n.children[f],Object.keys(n.children).length===0):!1};t(this.root,0)}findWords(e){let t=this.root;for(const n of e){if(!t.children[n])return[];t=t.children[n]}return this.collectWords(t,e)}collectWords(e,t){const n=[];e.isEndOfWord&&e.timestamp&&n.push({word:t,timestamp:e.timestamp});for(const s in e.children)n.push(...this.collectWords(e.children[s],t+s));return n}serialize(){function e(t){return{isEndOfWord:t.isEndOfWord,timestamp:t.timestamp,children:Object.fromEntries(Object.entries(t.children).map(([n,s])=>[n,e(s)]))}}return JSON.stringify(e(this.root))}static deserialize(e){const t=new z;function n(s){const f=new j;f.isEndOfWord=s.isEndOfWord,f.timestamp=s.timestamp;for(const[i,r]of Object.entries(s.children))f.children[i]=n(r);return f}return t.root=n(JSON.parse(e)),t}}const Ye=["onKeydown"],Xe={class:"outline-rosybrown-300 absolute top-full right-0 left-0 rounded-b-md bg-white pt-2 outline"},Qe=["onMouseenter"],Ze=["onClick"],et={class:"text-rosybrown-600 overflow-hidden text-ellipsis"},tt=["onClick"],ot={class:"flex flex-row-reverse items-baseline px-4 py-1"},nt=re({__name:"SearchBar",setup(o){const e=Se(),t=O(""),n=O([]),s=O(!1),f=O(!1),i=O(-1),r=O(!1),a=()=>{s.value=!1,i.value=-1,r.value=!1};ge(()=>{window.addEventListener("scroll",a)}),xe(()=>{window.removeEventListener("scroll",a)});const h=(c=>{try{return c?z.deserialize(c):new z}catch(p){return console.error("反序列化前缀树时出错:",p),new z}})(localStorage.getItem("searchHistory")),y=()=>{const c=t.value;if(c){h.insert(c);try{localStorage.setItem("searchHistory",h.serialize())}finally{t.value=""}}s.value=!1,f.value=!1,i.value=-1,r.value=!1,e.push({name:"search",query:{q:c}})},T=()=>{s.value=!0;const c=t.value,p=h.findWords(c);if(i.value=-1,r.value=!1,p.length<2){n.value=p.map(k=>k.word);return}p.sort((k,P)=>P.timestamp-k.timestamp),n.value=p.map(k=>k.word).slice(0,10)},b=c=>{t.value=n.value[c],y()},q=c=>{h.delete(n.value.splice(c,1)[0]),localStorage.setItem("searchHistory",h.serialize()),c===i.value&&(i.value=-1,r.value=!1)},D=()=>{n.value=[],h.clear(),localStorage.removeItem("searchHistory"),i.value=-1,r.value=!1},l=c=>{c.target.tagName==="INPUT"&&(s.value=!0,f.value=!0)},u=c=>{r.value&&(r.value=!1),!(!s.value||n.value.length===0)&&(c==="down"?i.value=i.value===n.value.length-1?0:i.value+1:i.value=i.value<=0?n.value.length-1:i.value-1,t.value=n.value[i.value],ce())},m=()=>{i.value!==-1&&n.value.length>0?b(i.value):y()},W=c=>{r.value=!0,i.value=c,t.value=n.value[c]},N=()=>{r.value=!1},ce=()=>{const c=document.querySelector(`li:nth-child(${i.value+1})`);c&&c.scrollIntoView({block:"nearest"})},de=A(()=>s.value&&n.value.length>0?["rounded-b-none","rounded-t-[24px]"]:["rounded-[3rem]"]),fe=A(()=>s.value?["backdrop-blur-xs","backdrop-brightness-90"]:["hidden"]);return(c,p)=>{const k=Ae,P=Ne;return x(),g("div",null,[v("div",{class:F(["fixed top-0 left-0 z-50 h-screen w-screen",fe.value])},null,2),L((x(),g("form",{class:F(["outline-rosybrown-300 hover:outline-rosybrown-400 relative z-100 flex h-12 flex-row items-center space-x-2 bg-white px-3 outline-2 hover:outline-3",de.value]),onSubmit:_(y,["prevent"]),onClick:l},[H(k,{width:"36",height:"36",class:"text-rosybrown-400 hover:text-rosybrown-700 cursor-pointer pl-1",onClick:_(y,["stop"])}),L(v("input",{class:"text-rosybrown-800 h-full w-full","onUpdate:modelValue":p[0]||(p[0]=$=>t.value=$),onInput:T,onFocus:T,onKeydown:[p[1]||(p[1]=V(_($=>u("down"),["prevent"]),["down"])),p[2]||(p[2]=V(_($=>u("up"),["prevent"]),["up"])),V(_(m,["prevent"]),["enter"])]},null,40,Ye),[[Te,t.value,void 0,{trim:!0}]]),L(v("ul",Xe,[(x(!0),g(ke,null,Oe(n.value,($,I)=>(x(),g("li",{key:I,class:F(["hover:text-rosybrown-700 box-border flex flex-row items-center justify-between border-l-3 px-4 py-1 transition-colors duration-150",[I===i.value?"border-l-rosybrown-700 bg-rosybrown-50 text-rosybrown-700":"border-l-transparent"]]),onMouseenter:X=>W(I),onMouseleave:N},[v("div",{class:"flex w-7/8 cursor-pointer flex-row items-center font-sans",onClick:_(X=>b(I),["stop"])},[H(P,{class:"text-rosybrown-400 pr-4",style:{width:"40px"}}),v("div",et,Ee($),1)],8,Ze),v("div",{class:"text-rosybrown-300 hover:text-rosybrown-500 cursor-pointer text-sm hover:underline",onClick:_(X=>q(I),["stop"])}," 删除 ",8,tt)],42,Qe))),128)),L(v("li",ot,[v("div",{class:"text-rosybrown-300 hover:text-rosybrown-500 cursor-pointer text-xs",onClick:_(D,["stop"])}," 清空历史 ")],512),[[Q,s.value&&n.value.length>0]])],512),[[Q,s.value&&n.value.length>0]])],34)),[[oe(Ke),()=>{s.value=!1,i.value=-1}]])])}}}),ct=se(nt,[["__scopeId","data-v-9bf3edee"]]),rt={class:"bg-wheat-50"},st={class:"bg-rosybrown-800 h-56 rounded-t-[48px] text-center"},lt={class:"flex flex-col pt-20"},dt=re({__name:"Footer",setup(o){return(e,t)=>(x(),g("div",rt,[v("div",st,[v("div",lt,[t[1]||(t[1]=v("span",{class:"text-sans text-rosybrown-50 mb-2"},"© 2025 米时典 SeeDict ",-1)),Ce("",!0)])])]))}});export{ut as N,ct as S,se as _,dt as a};
